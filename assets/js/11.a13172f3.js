(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{675:function(t,s,a){t.exports=a.p+"assets/img/frontEnd-performance.4551e9e2.png"},676:function(t,s,a){t.exports=a.p+"assets/img/chrome-perfermance.c92accb0.jpg"},677:function(t,s,a){t.exports=a.p+"assets/img/reflow-chart.99388b34.png"},678:function(t,s){t.exports="data:image/png;base64,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"},679:function(t,s,a){t.exports=a.p+"assets/img/select-img.846b5532.png"},680:function(t,s,a){t.exports=a.p+"assets/img/front-performance.f216c4b0.jpg"},830:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"前端性能优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前端性能优化"}},[t._v("🌙")]),t._v(" 前端性能优化")]),t._v(" "),n("p",[n("img",{attrs:{src:a(675),alt:""}})]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#_1-浏览器"}},[t._v("1.浏览器")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1-1-如何使用performance工具查看程序性能-https-developers-google-cn-web-tools-chrome-devtools-evaluate-performance-timeline-tool"}},[t._v("1.1如何使用performance工具查看程序性能")])]),n("li",[n("a",{attrs:{href:"#_1-2使用show-coverage查看代码覆盖率"}},[t._v("1.2使用Show Coverage查看代码覆盖率")])]),n("li",[n("a",{attrs:{href:"#_1-3-使用lighthouse查看页面整体性能"}},[t._v("1.3 使用lighthouse查看页面整体性能")])]),n("li",[n("a",{attrs:{href:"#_1-4-减少浏览器的重绘和回流-http-www-stubbornella-org-content-2009-03-27-reflows-repaints-css-performance-making-your-javascript-slow"}},[t._v("1.4 减少浏览器的重绘和回流")])])])]),n("li",[n("a",{attrs:{href:"#_2-网络优化"}},[t._v("2 网络优化")]),n("ul",[n("li",[n("a",{attrs:{href:"#_2-1-dns查询"}},[t._v("2.1 DNS查询：")])]),n("li",[n("a",{attrs:{href:"#_2-2-dns预解析"}},[t._v("2.2 DNS预解析")])]),n("li",[n("a",{attrs:{href:"#_2-3-tcp分段和ip分片"}},[t._v("2.3 TCP分段和IP分片")])]),n("li",[n("a",{attrs:{href:"#_2-4-tcp慢启动-https-zhuanlan-zhihu-com-p-139378305"}},[t._v("2.4 TCP慢启动")])]),n("li",[n("a",{attrs:{href:"#_2-5-减少http请求"}},[t._v("2.5 减少HTTP请求")])]),n("li",[n("a",{attrs:{href:"#_2-6-使用-http2"}},[t._v("2.6 使用 HTTP2")])]),n("li",[n("a",{attrs:{href:"#_2-7-压缩-http-的请求和响应-http-nodejs-cn-api-zlib-compressing-http-requests-and-responses-html"}},[t._v("2.7 压缩 HTTP 的请求和响应")])]),n("li",[n("a",{attrs:{href:"#_2-8-使用服务端渲染-ssr"}},[t._v("2.8 使用服务端渲染（ssr）：")])]),n("li",[n("a",{attrs:{href:"#_2-9-静态资源使用-cdn-内容分发网络"}},[t._v("2.9 静态资源使用 CDN(内容分发网络)")])])])]),n("li",[n("a",{attrs:{href:"#_3-图片优化"}},[t._v("3 图片优化")]),n("ul",[n("li",[n("a",{attrs:{href:"#_3-1-使用字体图标-iconfont-代替图片图标"}},[t._v("3.1 使用字体图标 iconfont 代替图片图标")])]),n("li",[n("a",{attrs:{href:"#_3-2-图片懒加载"}},[t._v("3.2 图片懒加载：")])]),n("li",[n("a",{attrs:{href:"#_3-3-响应式图片"}},[t._v("3.3 响应式图片")])]),n("li",[n("a",{attrs:{href:"#_3-4-使用缩略图"}},[t._v("3.4 使用缩略图")])]),n("li",[n("a",{attrs:{href:"#_3-5-合理选择图片格式"}},[t._v("3.5 合理选择图片格式")])]),n("li",[n("a",{attrs:{href:"#_3-6-压缩图片"}},[t._v("3.6 压缩图片")])]),n("li",[n("a",{attrs:{href:"#_3-7-尽可能利用-css3-效果代替图片"}},[t._v("3.7 尽可能利用 CSS3 效果代替图片")])]),n("li",[n("a",{attrs:{href:"#_3-8-使用-css-sprites-雪碧图"}},[t._v("3.8 使用 CSS Sprites 雪碧图")])]),n("li",[n("a",{attrs:{href:"#_3-9-处理加载失败的图片"}},[t._v("3.9 处理加载失败的图片")])]),n("li",[n("a",{attrs:{href:"#_3-10-图片预加载"}},[t._v("3.10 图片预加载")])]),n("li",[n("a",{attrs:{href:"#_3-11-降低-提升图像加载优先级"}},[t._v("3.11 降低/提升图像加载优先级")])])])]),n("li",[n("a",{attrs:{href:"#_4-react性能优化-https-juejin-cn-post-6908895801116721160"}},[t._v("4.React性能优化")]),n("ul",[n("li",[n("a",{attrs:{href:"#_4-1-代码拆分-code-splitting-https-react-css88-com-docs-code-splitting-html"}},[t._v("4.1代码拆分（Code Splitting）")])]),n("li",[n("a",{attrs:{href:"#_4-2优化组件"}},[t._v("4.2优化组件")])])])]),n("li",[n("a",{attrs:{href:"#_5-webpack打包优化"}},[t._v("5.webpack打包优化")]),n("ul",[n("li",[n("a",{attrs:{href:"#_5-1打包分析webpack-bundle-analyzer"}},[t._v("5.1打包分析webpack-bundle-analyzer")])]),n("li",[n("a",{attrs:{href:"#_5-2-升级webpack"}},[t._v("5.2 升级webpack")])]),n("li",[n("a",{attrs:{href:"#_5-3配置source-map"}},[t._v("5.3配置source-map")])]),n("li",[n("a",{attrs:{href:"#_5-4-指定打包文件-exclude-include"}},[t._v("5.4 指定打包文件exclude/include")])]),n("li",[n("a",{attrs:{href:"#_5-5使用缓存cache-loader"}},[t._v("5.5使用缓存cache-loader")])]),n("li",[n("a",{attrs:{href:"#_5-6多线程构建thread-loader"}},[t._v("5.6多线程构建thread-loader")])]),n("li",[n("a",{attrs:{href:"#_5-7开启多进程压缩-terser-webpack-plugin-https-webpack-docschina-org-plugins-terser-webpack-plugin"}},[t._v("5.7开启多进程压缩terser-webpack-plugin")])]),n("li",[n("a",{attrs:{href:"#_5-8缓存第一次构建-hard-source-webpack-plugin"}},[t._v("5.8缓存第一次构建hard-source-webpack-plugin")])]),n("li",[n("a",{attrs:{href:"#_5-9noparse标记不进行转化和解析"}},[t._v("5.9noParse标记不进行转化和解析")])]),n("li",[n("a",{attrs:{href:"#_5-10配置resolve加快查找模块"}},[t._v("5.10配置resolve加快查找模块")])]),n("li",[n("a",{attrs:{href:"#_5-11-ignoreplugin-https-webpack-docschina-org-plugins-ignore-plugin-忽略第三方包指定目录"}},[t._v("5.11 IgnorePlugin忽略第三方包指定目录")])]),n("li",[n("a",{attrs:{href:"#_5-12externals不打包使用cdn引入的js"}},[t._v("5.12externals不打包使用CDN引入的js")])]),n("li",[n("a",{attrs:{href:"#_5-13使用-dllplugin-https-webpack-docschina-org-plugins-dll-plugin-拆分bundles"}},[t._v("5.13使用DllPlugin拆分bundles")])]),n("li",[n("a",{attrs:{href:"#_5-14抽离公共代码optimization-splitchunks"}},[t._v("5.14抽离公共代码optimization.splitChunks")])]),n("li",[n("a",{attrs:{href:"#_5-15-tree-shaking-https-webpack-docschina-org-blog-2020-10-10-webpack-5-release-nested-tree-shaking"}},[t._v("5.15tree-shaking")])]),n("li",[n("a",{attrs:{href:"#_5-16-scope-hosting-作用域提升"}},[t._v("5.16 scope hosting 作用域提升")])]),n("li",[n("a",{attrs:{href:"#_5-17babel-配置的优化"}},[t._v("5.17babel 配置的优化")])])])]),n("li",[n("a",{attrs:{href:"#_6首屏优化"}},[t._v("6首屏优化")]),n("ul",[n("li",[n("a",{attrs:{href:"#_6-1cdn分发-减少传输距离"}},[t._v("6.1CDN分发，减少传输距离")])]),n("li",[n("a",{attrs:{href:"#_6-2后端数据缓存"}},[t._v("6.2后端数据缓存")])]),n("li",[n("a",{attrs:{href:"#_6-3前端的资源动态加载"}},[t._v("6.3前端的资源动态加载")])]),n("li",[n("a",{attrs:{href:"#_6-4减少请求的数量"}},[t._v("6.4减少请求的数量")])]),n("li",[n("a",{attrs:{href:"#_6-5使用http压缩-gzip"}},[t._v("6.5使用http压缩，GZIP")])]),n("li",[n("a",{attrs:{href:"#_6-6页面使用骨架屏"}},[t._v("6.6页面使用骨架屏")])]),n("li",[n("a",{attrs:{href:"#_6-7使用ssr渲染"}},[t._v("6.7使用ssr渲染")])]),n("li",[n("a",{attrs:{href:"#_6-8使用async和defer"}},[t._v("6.8使用async和defer")])]),n("li",[n("a",{attrs:{href:"#_6-9合理选择图片格式"}},[t._v("6.9合理选择图片格式")])]),n("li",[n("a",{attrs:{href:"#_6-10-使用http缓存"}},[t._v("6.10 使用HTTP缓存")])]),n("li",[n("a",{attrs:{href:"#_6-11-浏览器缓存-localstorage"}},[t._v("6.11 浏览器缓存(localStorage)")])])])]),n("li",[n("a",{attrs:{href:"#小结"}},[t._v("小结")])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"_1-浏览器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-浏览器"}},[t._v("🌙")]),t._v(" 1.浏览器")]),t._v(" "),n("h3",{attrs:{id:"_1-1如何使用performance工具查看程序性能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1如何使用performance工具查看程序性能"}},[t._v("🌙")]),t._v(" 1.1"),n("a",{attrs:{href:"https://developers.google.cn/web/tools/chrome-devtools/evaluate-performance/timeline-tool",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何使用performance工具查看程序性能"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("img",{attrs:{src:a(676),alt:""}})]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("FP")]),t._v("： First Paint")]),t._v(" "),n("li",[t._v("FCP： First Contentful Paint")]),t._v(" "),n("li",[n("strong",[t._v("FMP")]),t._v("： First Meaningful Paint")]),t._v(" "),n("li",[n("strong",[t._v("TTI")]),t._v("： Time To Interactive")])]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.acmethemes.com/blog/first-contentful-paint-and-first-meaningful-paint/#",target:"_blank",rel:"noopener noreferrer"}},[t._v("First Contentful Paint (FCP) and First Meaningful Paint (FMP) Explained"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("火焰图表线条含义：")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("蓝线")]),t._v("：代表DOMContentLoaded事件。")]),t._v(" "),n("li",[n("span",{staticStyle:{color:"green"}},[t._v("绿线")]),t._v("：表示第一次绘制的时间。")]),t._v(" "),n("li",[n("span",{staticStyle:{color:"red"}},[t._v("红线")]),t._v("：代表load事件。")])]),t._v(" "),n("p",[t._v("彩色条含义：\n"),n("ul",[n("li",[t._v("HTML文件是 "),n("strong",[n("span",{staticStyle:{color:"hsl(214, 67%, 66%)"}},[t._v("blue (蓝色)")])]),t._v(" 的。")]),t._v(" "),n("li",[t._v("JS是 "),n("strong",[n("span",{staticStyle:{color:"hsl(43, 83%, 64%)"}},[t._v("yellow (黄色)")])]),t._v(" 的。")]),t._v(" "),n("li",[t._v("CSS表是 "),n("strong",[n("span",{staticStyle:{color:"hsl(256, 67%, 70%)"}},[t._v("purple (紫色)")])]),t._v(" 的。")]),t._v(" "),n("li",[t._v("媒体文件是 "),n("strong",[n("span",{staticStyle:{color:"hsl(109, 33%, 55%)"}},[t._v("green (绿色)")])]),t._v(" 的。")]),t._v(" "),n("li",[n("p",[t._v("其他是 "),n("strong",[n("span",{staticStyle:{color:"hsl(0, 0%, 70%)"}},[t._v("grey (灰色)")])]),t._v(" 的。")]),n("p",[n("br")])])])]),t._v(" "),n("h3",{attrs:{id:"_1-2使用show-coverage查看代码覆盖率"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2使用show-coverage查看代码覆盖率"}},[t._v("🌙")]),t._v(" 1.2使用Show Coverage查看代码覆盖率")]),t._v(" "),n("p",[t._v("chrome浏览器，调试console界面，"),n("code",[t._v("ctrl+shift+p")]),t._v(",输入"),n("code",[t._v("show Courage")])]),t._v(" "),n("p",[t._v("使用"),n("strong",[t._v("异步加载")]),t._v("优化, 如：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dom "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello Webpack'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" handleClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 异步加载，并在空闲的时候预加载")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* webpackPrefetch: true */")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./handle'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("click "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("blockquote",[n("p",[t._v("推荐： "),n("a",{attrs:{href:"https://blog.csdn.net/Umbrella_Um/article/details/100179524",target:"_blank",rel:"noopener noreferrer"}},[t._v("【webpack】快速笔记18 -- 擅用show Coverage以及 preloading与prefetching"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_1-3-使用lighthouse查看页面整体性能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-使用lighthouse查看页面整体性能"}},[t._v("🌙")]),t._v(" 1.3 使用lighthouse查看页面整体性能")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/33752746",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lighthouse的使用与Google的移动端最佳实践"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://web.dev/how-to-measure-speed/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to measure speed?"),n("OutboundLink")],1)])]),t._v(" "),n("blockquote",[n("p",[t._v("工具：")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://developers.google.com/speed/pagespeed/insights/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google’s PageSpeed Insights"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://gtmetrix.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GTmetrix"),n("OutboundLink")],1)])])])]),t._v(" "),n("h3",{attrs:{id:"_1-4-减少浏览器的重绘和回流"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-减少浏览器的重绘和回流"}},[t._v("🌙")]),t._v(" 1.4 "),n("a",{attrs:{href:"http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/",target:"_blank",rel:"noopener noreferrer"}},[t._v("减少浏览器的重绘和回流"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("img",{attrs:{src:a(677),alt:"reflow-chart"}})]),t._v(" "),n("p",[n("strong",[t._v("重绘")])]),t._v(" "),n("p",[t._v("由于节点的几何属性发生改变或者由于样式发生改变而不会影响布局的，称为重绘，例如outline, visibility, color、background-color等，重绘的代价是高昂的，因为浏览器必须验证DOM树上其他节点元素的可见性。")]),t._v(" "),n("p",[n("strong",[t._v("回流")])]),t._v(" "),n("p",[t._v("回流必定会发生重绘，重绘不一定会引发回流。\n回流是布局或者几何属性需要改变就称为回流。回流是影响浏览器性能的关键因素，因为其变化涉及到部分页面（或是整个页面）的布局更新。一个元素的回流可能会导致了其所有子元素以及DOM中紧随其后的节点、祖先节点元素的随后的回流。")]),t._v(" "),n("p",[n("strong",[t._v("哪些会导致回流？")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("+ 添加或删除可见的DOM元素\n+ 元素的位置发生变化\n+ 元素的尺寸发生变化（包括外边距、内边框、边框大小、高度和宽度等）\n+ 内容发生变化，比如文本变化或图片被另一个不同尺寸的图片所替代。\n+ 页面一开始渲染的时候（这肯定避免不了）\n+ 浏览器的窗口尺寸变化（因为回流是根据视口的大小来计算元素的位置和大小的）\n")])])]),n("p",[t._v("注意："),n("strong",[t._v("回流一定会触发重绘，而重绘不一定会回流")])]),t._v(" "),n("p",[n("strong",[t._v("怎么减少回流？")])]),t._v(" "),n("p",[n("strong",[t._v("针对CSS")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("- 使用transform代替top\n\n- 使用 visibility 替换 display: none\n\n  为前者只会引起重绘，后者会引发回流（改变了布局)\n\n- 避免使用table布局\n\n  可能很小的一个小改动会造成整个 table 的重新布局\n\n- 尽可能在DOM树的最末端改变class\n\n  回流是不可避免的，但可以减少其影响。尽可能在DOM树的最末端改变class，可以限制了回流的范围，使其影响尽可能少的节点\n\n- 避免设置多层内联样式\n\n  CSS 选择符从右往左匹配查找，避免节点层级过多\n\n- 将动画效果应用到position属性为absolute或fixed的元素上\n\n  避免影响其他元素的布局，这样只是一个重绘，而不是回流，同时，控制动画速度可以选择 requestAnimationFrame，详见探讨 requestAnimationFrame。\n\n- 避免使用CSS表达式，可能会引发回流\n\n- 将频繁重绘或者回流的节点设置为图层\n\n  图层能够阻止该节点的渲染行为影响别的节点，例如will-change、video、iframe等标签，浏览器会自动将该节点变为图层。\n\n- CSS3 硬件加速（GPU加速）\n\n  使用css3硬件加速，可以让transform、opacity、filters这些动画不会引起回流重绘 。但是对于动画的其它属性，比如background-color这些，还是会引起回流重绘的，不过它还是可以提升这些动画的性能。\n\n  - transform、opacity、filters、will-changeition-absolute 或 position-fixed 来实现此目的。\n")])])]),n("p",[n("strong",[t._v("针对JS")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("- 避免频繁操作样式，最好一次性重写style属性，或者将样式列表定义为class并一次性更改class属性。\n- 避免频繁操作DOM，创建一个documentFragment，在它上面应用所有DOM操作，最后再把它添加到文档中。\n- 避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。\n- 对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。\n\n- 使用cssText一次性改变样式\n\n- 修改class类名来操作样式\n\n- 批量修改DOM先让DOM脱离文档流\n\n  1.使元素脱离文档流\n  2.对其进行多次修改\n  3.将元素带回到文档中。\n")])])]),n("p",[n("strong",[t._v("有三种方式可以让DOM脱离文档流")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("1.隐藏元素，应用修改，重新显示\n\n2.使用文档片段(document fragment)在当前DOM之外构建一个子树，再把它拷贝回文档。\n\n3.将原始元素拷贝到一个脱离文档的节点中，修改节点后，再替换原始的元素。\n")])])]),n("blockquote",[n("p",[n("a",{attrs:{href:"https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/24",target:"_blank",rel:"noopener noreferrer"}},[t._v("介绍下重绘和回流（Repaint & Reflow），以及如何进行优化 "),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"_2-网络优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-网络优化"}},[t._v("🌙")]),t._v(" 2 网络优化")]),t._v(" "),n("p",[n("img",{attrs:{src:a(678),alt:""}})]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/webVueBlog/interview-answe/issues/27",target:"_blank",rel:"noopener noreferrer"}},[t._v("从输入url到页面渲染"),n("OutboundLink")],1),t._v("的时间怎么变短？")]),t._v(" "),n("h3",{attrs:{id:"_2-1-dns查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-dns查询"}},[t._v("🌙")]),t._v(" 2.1 DNS查询：")]),t._v(" "),n("ul",[n("li",[t._v("浏览器缓存")]),t._v(" "),n("li",[t._v("本机缓存")]),t._v(" "),n("li",[t._v("hosts文件")]),t._v(" "),n("li",[t._v("路由器缓存")]),t._v(" "),n("li",[t._v("ISP DNS缓存")]),t._v(" "),n("li",[t._v("DNS递归查询（可能存在负载均衡导致每次IP不一样）")])]),t._v(" "),n("h3",{attrs:{id:"_2-2-dns预解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-dns预解析"}},[t._v("🌙")]),t._v(" 2.2 DNS预解析")]),t._v(" "),n("p",[t._v("浏览器会在加载网页时对网页中的域名进行解析缓存，这样在你单击当前网页中的连接时就无需进行 DNS 的解析，减少用户等待时间，提高用户体验。")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--<meta>信息告诉浏览器，当前页面要做DNS预解析;content="off"禁用--\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("x-dns-prefetch-control"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--使用<link>标签来强制对DNS预解析--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prsfetch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//g.alicdn.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("link")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("blockquote",[n("p",[n("a",{attrs:{href:"https://blog.csdn.net/qq_35432904/article/details/83988726?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromBaidu-1.not_use_machine_learn_pai&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromBaidu-1.not_use_machine_learn_pai",target:"_blank",rel:"noopener noreferrer"}},[t._v("DNS预解析dns-prefetch是什么及怎么使用"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://harttle.land/2015/10/06/html-cache.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web 性能优化：prefetch, prerender"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/48521680",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 Preload/Prefetch 优化你的应用"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_2-3-tcp分段和ip分片"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-tcp分段和ip分片"}},[t._v("🌙")]),t._v(" 2.3 TCP分段和IP分片")]),t._v(" "),n("p",[t._v("TCP报文段如果很长的话，会在发送时发生分段，在接受时进行重组，同样IP数据包在长度超过一定值时也会发生分片，在接收端再将分片重组。")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/zhangkele/p/9899278.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("TCP/IP详解--TCP的分段和IP的分片"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_2-4-tcp慢启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-tcp慢启动"}},[t._v("🌙")]),t._v(" 2.4 "),n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/139378305",target:"_blank",rel:"noopener noreferrer"}},[t._v("TCP慢启动"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("根据网络情况逐步增加每次发送的数据量，让网络包的大小逐渐匹配网速，从而防止网络的拥塞现象。")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.bookstack.cn/read/tcp-udp-ip/24.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("TCP的智慧—慢启动，拥塞避免，快速重传和快速恢复"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_2-5-减少http请求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-减少http请求"}},[t._v("🌙")]),t._v(" 2.5 减少HTTP请求")]),t._v(" "),n("p",[t._v("一个完整的 HTTP 请求需要经历 DNS 查找，TCP 握手，浏览器发出 HTTP 请求，服务器接收请求，服务器处理请求并发回响应，浏览器接收响应等过程。")]),t._v(" "),n("h3",{attrs:{id:"_2-6-使用-http2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-使用-http2"}},[t._v("🌙")]),t._v(" 2.6 使用 HTTP2")]),t._v(" "),n("p",[t._v("解析速度快、多路复用（多个请求可以共用一个 TCP 连接）、头部压缩、服务器推送")]),t._v(" "),n("h3",{attrs:{id:"_2-7-压缩-http-的请求和响应"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-压缩-http-的请求和响应"}},[t._v("🌙")]),t._v(" 2.7 "),n("a",{attrs:{href:"http://nodejs.cn/api/zlib/compressing_http_requests_and_responses.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("压缩 HTTP 的请求和响应"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"_2-8-使用服务端渲染-ssr"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-使用服务端渲染-ssr"}},[t._v("🌙")]),t._v(" 2.8 使用服务端渲染（ssr）：")]),t._v(" "),n("ul",[n("li",[n("RouterLink",{attrs:{to:"/frontEnd/VAR/React学习笔记/React进阶之-Next.html"}},[t._v("react框架next")])],1),t._v(" "),n("li",[n("RouterLink",{attrs:{to:"/frontEnd/VAR/Vue学习笔记/Vue-SSR Nuxt.html"}},[t._v("vue框架nuxt")])],1)]),t._v(" "),n("h3",{attrs:{id:"_2-9-静态资源使用-cdn-内容分发网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-静态资源使用-cdn-内容分发网络"}},[t._v("🌙")]),t._v(" 2.9 静态资源使用 CDN(内容分发网络)")]),t._v(" "),n("p",[t._v("在多个位置部署服务器，让用户离服务器更近，从而缩短请求时间。")]),t._v(" "),n("blockquote",[n("p",[t._v("基于TCP之上的协议，如HTTP，传输过程要在加上其头部信息并且还需要解析之后TCP才能识别，这部分信息也会影响网络传输速度。如果只是单纯的发送一些数据，可以不走HTTP，可以直接基于TCP之上定制自己的client和server，以减少包的大小，从而达到加快传输的目的。")])]),t._v(" "),n("p",[n("strong",[t._v("问题再现：")])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://os.51cto.com/art/202006/618050.htm#topx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chrome架构：仅仅打开了1个页面，为什么有4个进程？"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6902556452721229837#heading-0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chrome原理和HTTP协议"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"_3-图片优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-图片优化"}},[t._v("🌙")]),t._v(" 3 图片优化")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://github.com/qq449245884/xiaozhi/issues/224",target:"_blank",rel:"noopener noreferrer"}},[t._v("web 图像技术：前端引入图片的各种方式及其优缺点"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_3-1-使用字体图标-iconfont-代替图片图标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-使用字体图标-iconfont-代替图片图标"}},[t._v("🌙")]),t._v(" 3.1 使用字体图标 iconfont 代替图片图标")]),t._v(" "),n("p",[t._v("字体图标就是将图标制作成一个字体，使用时就跟字体一样，可以设置属性，例如 font-size、color 等等，非常方便。并且字体图标是矢量图，不会失真。还有一个优点是生成的文件特别小。")]),t._v(" "),n("p",[t._v("还可以使用 fontmin-webpack 插件对字体文件进行压缩")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://github.com/patrickhulce/fontmin-webpack",target:"_blank",rel:"noopener noreferrer"}},[t._v("fontmin-webpack"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.iconfont.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Iconfont-阿里巴巴矢量图标库"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_3-2-图片懒加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-图片懒加载"}},[t._v("🌙")]),t._v(" 3.2 图片懒加载：")]),t._v(" "),n("p",[t._v("在页面中，先不给图片设置路径，只有当图片出现在浏览器的可视区域时，才去加载真正的图片，这就是图片懒加载。")]),t._v(" "),n("p",[t._v("首先可以将图片这样设置，在页面不可见时图片不会加载：")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v('<img data-src="https://assets/xx.jpg>\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("等页面可见时，使用 JS 加载图片：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" img "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \nimg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" img"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading",target:"_blank",rel:"noopener noreferrer"}},[t._v("还可以使用HTML5中的"),n("code",[t._v("loading")]),t._v("属性，处于实验阶段"),n("OutboundLink")],1),t._v("：")]),t._v(" "),n("p",[n("code",[t._v("loading")]),t._v("：指示浏览器应当如何加载该图像。")]),t._v(" "),n("p",[n("code",[t._v("loading：eager")]),t._v("立即加载图像，不管它是否在可视视口（visible viewport）之外（默认值）。")]),t._v(" "),n("p",[n("code",[t._v("loading: lazy")]),t._v("延迟加载图像，直到它和视口接近到一个计算得到的距离，由浏览器定义。")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844903482164510734",target:"_blank",rel:"noopener noreferrer"}},[t._v("web 前端图片懒加载实现原理"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_3-3-响应式图片"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-响应式图片"}},[t._v("🌙")]),t._v(" 3.3 响应式图片")]),t._v(" "),n("p",[t._v("浏览器能够根据屏幕大小自动加载合适的图片:")]),t._v(" "),n("ul",[n("li",[t._v("通过 picture 实现:")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("picture")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("source")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("srcset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("banner_w1000.jpg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("media")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(min-width: 801px)"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("source")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("srcset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("banner_w800.jpg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("media")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(max-width: 800px)"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("banner_w800.jpg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("picture")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("ul",[n("li",[t._v("通过 @media 实现:")])]),t._v(" "),n("div",{staticClass:"language-css line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("min-width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 769px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".bg")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token url"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bg1080.jpg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("max-width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 768px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".bg")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token url"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bg768.jpg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("h3",{attrs:{id:"_3-4-使用缩略图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-使用缩略图"}},[t._v("🌙")]),t._v(" 3.4 使用缩略图")]),t._v(" "),n("p",[t._v("例如，你有一个 1920 * 1080 大小的图片，用缩略图的方式展示给用户，并且当用户鼠标悬停在上面时才展示全图。如果用户从未真正将鼠标悬停在缩略图上，则浪费了下载图片的时间。")]),t._v(" "),n("p",[t._v("所以，我们可以用两张图片来实行优化。")]),t._v(" "),n("p",[t._v("一开始，只加载缩略图，当用户悬停在图片上时，才加载大图。")]),t._v(" "),n("p",[t._v("还有一种办法，即对大图进行延迟加载，在所有元素都加载完成后手动更改大图的 src 进行下载。")]),t._v(" "),n("h3",{attrs:{id:"_3-5-合理选择图片格式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-合理选择图片格式"}},[t._v("🌙")]),t._v(" 3.5 合理选择图片格式")]),t._v(" "),n("p",[n("img",{attrs:{src:a(679),alt:""}})]),t._v(" "),n("ul",[n("li",[t._v("下一代图片格式 AVIF（AV1 Image File Format）已经来了，此格式比 JPEG 小 50% 左右、比 WebP 小 20% 左右，相关性能跑分见此，目前 Chrome 85、Firefox 77 已支持；")])]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://jayzangwill.github.io/blog/2020/04/07/img-knowledge/",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端该如何选择图片的格式"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/j6V5CLeHJzU5WxysmnQUqg",target:"_blank",rel:"noopener noreferrer"}},[t._v("每个前端工程师都应该了解的图片知识"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.zhihu.com/question/27201061",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebP 相对于 PNG、JPG 有什么优势？"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_3-6-压缩图片"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-压缩图片"}},[t._v("🌙")]),t._v(" 3.6 压缩图片")]),t._v(" "),n("p",[t._v("压缩方法有两种，一是通过 webpack 插件 image-webpack-loader，二是通过在线网站进行压缩。\n使用插件 "),n("code",[t._v("image-webpack-loader")]),t._v(" ：")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -D image-webpack-loader\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("webpack 配置：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.(png|jpe?g|gif|svg)(\\?.*)?$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  use"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    options"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      limit"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 图片大小小于1000字节限制时会自动转成 base64 码引用*/")]),t._v("\n      name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" utils"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assetsPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img/[name].[hash:7].[ext]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*对图片进行压缩*/")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image-webpack-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      options"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        bypassOnDebug"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br")])]),n("h3",{attrs:{id:"_3-7-尽可能利用-css3-效果代替图片"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-尽可能利用-css3-效果代替图片"}},[t._v("🌙")]),t._v(" 3.7 尽可能利用 CSS3 效果代替图片")]),t._v(" "),n("p",[t._v("有很多图片使用 CSS 效果（渐变、阴影等）就能画出来，这种情况选择 CSS3 效果更好。因为代码大小通常是图片大小的几分之一甚至几十分之一。但是需要考虑浏览器兼容性。")]),t._v(" "),n("h3",{attrs:{id:"_3-8-使用-css-sprites-雪碧图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-使用-css-sprites-雪碧图"}},[t._v("🌙")]),t._v(" 3.8 使用 CSS Sprites 雪碧图")]),t._v(" "),n("p",[t._v("webpack插件： "),n("a",{attrs:{href:"https://www.npmjs.com/package/webpack-spritesmith",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-spritesmith"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000007686042",target:"_blank",rel:"noopener noreferrer"}},[t._v("浅谈 CSS Sprites 雪碧图应用"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_3-9-处理加载失败的图片"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-9-处理加载失败的图片"}},[t._v("🌙")]),t._v(" 3.9 处理加载失败的图片")]),t._v(" "),n("ul",[n("li",[t._v("1.图像注明"),n("code",[t._v("alt")]),t._v("属性，将图像加载"),n("code",[t._v("error")]),t._v("的时候，新增一个错误类名，例如"),n("code",[t._v(".error")]),t._v("：")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("zxx.png"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("CSS新世界封面"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onerror")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("this.classList.add("),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(");"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("2.配合使用如下所示的CSS,并将"),n("code",[t._v("alt")]),t._v("属性显示出来：")])]),t._v(" "),n("div",{staticClass:"language-scss line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("img.error ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" inline-block"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scale")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" transparent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[n("span",{pre:!0,attrs:{class:"token parent important"}},[t._v("&")]),t._v("::before ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" absolute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("left")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("top")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #f5f5f5 "),n("span",{pre:!0,attrs:{class:"token url"}},[t._v("url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'break.svg'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" no-repeat center "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" 50% 50%"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[n("span",{pre:!0,attrs:{class:"token parent important"}},[t._v("&")]),t._v("::after ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 展示alt属性，标明加载失败的图像的内容")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("attr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" absolute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("left")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("bottom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("line-height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgba")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" white"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 12px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("text-align")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" center"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("white-space")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nowrap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("overflow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hidden"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("text-overflow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ellipsis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br")])]),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.zhangxinxu.com/wordpress/2020/10/css-style-image-load-fail/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考：图片加载失败后CSS样式处理最佳实践"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_3-10-图片预加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-图片预加载"}},[t._v("🌙")]),t._v(" 3.10 图片预加载")]),t._v(" "),n("p",[t._v("HTML5中有原生的预加载属性，名为"),n("code",[t._v("prefetch")]),t._v("和"),n("code",[t._v("prerender")]),t._v(":")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--IE11及以上，兼容性更好--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(url)"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--prefetcher:浏览器会在后台（页面不可见）的位置预加载,相比prefetch，兼容性要差一些--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetcher"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(url)"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("或者使用JS：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("preloadImg")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" img "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    img"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("complete"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//接下来可以使用图片了")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//do something here")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        img"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//接下来可以使用图片了")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//do something here")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("还可以提高图片的加载")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.zhangxinxu.com/wordpress/2016/06/image-preload-based-on-user-behavior/",target:"_blank",rel:"noopener noreferrer"}},[t._v("张鑫旭:基于用户行为的图片等资源预加载"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_3-11-降低-提升图像加载优先级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-11-降低-提升图像加载优先级"}},[t._v("🌙")]),t._v(" 3.11 降低/提升图像加载优先级")]),t._v(" "),n("p",[n("code",[t._v("<img>")]),t._v("标签的"),n("code",[t._v("importance")]),t._v("属性可以指示下载资源时相对重要性，或者说优先级。允许的值：")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("importance：auto")]),t._v("：不指定优先级。浏览器可以使用自己的算法来为图像选择优先级。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("importance：high")]),t._v("：此图像在下载时优先级较高。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("importance：low")]),t._v("：此图像在下载时优先级较低。")])])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!-- An image the browser assigns "High" priority, but we don\'t actually want that. --\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/images/in_viewport_but_not_important.svg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("importance")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("low"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("I"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("m an unimportant image!"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("当然不仅仅"),n("code",[t._v("img")]),t._v("可以，我们还可以给"),n("code",[t._v("js")]),t._v("加上：")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- We want to initiate an early fetch for a resource, but also deprioritize it --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/js/script.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("importance")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("low"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/js/app.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("defer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("importance")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("high"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}}),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("甚至,使用"),n("code",[t._v("fetch")]),t._v("API也可以加上这个属性：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://example.com/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("importance"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"low"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Do whatever you normally would with fetch data")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("blockquote",[n("p",[n("a",{attrs:{href:"https://developers.google.com/web/updates/2019/02/priority-hints",target:"_blank",rel:"noopener noreferrer"}},[t._v("Get Ready for Priority Hints"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"_4-react性能优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-react性能优化"}},[t._v("🌙")]),t._v(" 4."),n("a",{attrs:{href:"https://juejin.cn/post/6908895801116721160",target:"_blank",rel:"noopener noreferrer"}},[t._v("React性能优化"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"_4-1代码拆分-code-splitting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1代码拆分-code-splitting"}},[t._v("🌙")]),t._v(" 4.1"),n("a",{attrs:{href:"https://react.css88.com/docs/code-splitting.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码拆分（Code Splitting）"),n("OutboundLink")],1)]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/code-splitting.html#import",target:"_blank",rel:"noopener noreferrer"}},[t._v("通过动态 import() 语法"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/code-splitting.html#reactlazy",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用React.lazy懒加载"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/code-splitting.html#suspense",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用Suspense为组件添加Loading"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/code-splitting.html#%E9%94%99%E8%AF%AF%E8%BE%B9%E7%95%8C",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用ErrorBoundary错误捕获"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[n("RouterLink",{attrs:{to:"/frontEnd/VAR/React学习笔记/React接入fundebug.html"}},[t._v("React异常捕获")])],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/code-splitting.html#%E5%9F%BA%E4%BA%8E%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BB%A3%E7%A0%81%E6%8B%86%E5%88%86",target:"_blank",rel:"noopener noreferrer"}},[t._v("基于路由的代码拆分"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://serverless-stack.com/chapters/code-splitting-in-create-react-app.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Code Splitting and React Router v4"),n("OutboundLink")],1)])])])]),t._v(" "),n("p",[n("strong",[t._v("React Router实践：")]),t._v(" 使用"),n("code",[t._v("react-loadable")]),t._v("、"),n("code",[t._v("react-router-config")])]),t._v(" "),n("ul",[n("li",[t._v("配置"),n("code",[t._v("app.tsx")]),t._v(", 挂载DOM：")])]),t._v(" "),n("div",{staticClass:"language-typescript jsx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Provider "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mobx-react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ReactDOM "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" renderRoutes "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-config'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" HashRouter "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-dom'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./index.scss'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" routes "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./routes'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" stores "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./stores'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nReactDOM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("HashRouter"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此处渲染路由")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Provider "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("stores"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderRoutes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Provider"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("HashRouter"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])]),n("ul",[n("li",[t._v("配置"),n("code",[t._v("routes.ts")]),t._v("文件：")])]),t._v(" "),n("div",{staticClass:"language-typescript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Loadable "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-loadable'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Loading "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../components/Loading'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" RouteConfig "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-config'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" RouteConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    component"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Loadable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此处为页面布局")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("loader")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Layout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      loading"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Loading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    routes"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/page-a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        exact"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        component"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Loadable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("loader")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./pages/page-a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          loading"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Loading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/page-b'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        exact"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        component"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Loadable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("loader")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./pages/page-b'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          loading"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Loading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" routes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br")])]),n("ul",[n("li",[t._v("配置页面布局"),n("code",[t._v("Layout.tsx")]),t._v(":")])]),t._v(" "),n("div",{staticClass:"language-typescript jsx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" renderRoutes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" RouteConfigComponentProps "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-config'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" TopBar "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/topbar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Sidebar "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/sidebar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Footer "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/footer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Layout"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FC")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RouteConfigComponentProps"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("route"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TopBar "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Sidebar "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("route "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderRoutes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("route"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("routes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Footer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Layout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br")])]),n("h3",{attrs:{id:"_4-2优化组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2优化组件"}},[t._v("🌙")]),t._v(" 4.2优化组件")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/fragments.html#short-syntax",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用Fragment减少DOM节点"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/optimizing-performance.html#%E8%99%9A%E6%8B%9F%E5%8C%96%E9%95%BF%E5%88%97%E8%A1%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用虚拟滚动"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://react-window.now.sh/#/examples/list/fixed-size",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-window"),n("OutboundLink")],1)])])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/react-api.html#reactpurecomponent",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用React.PureComponent"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/optimizing-performance.html#%E5%BA%94%E7%94%A8-shouldcomponentupdate",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用shouldComponentUpdate"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[t._v("大多数情况下，你可以使用 React.PureComponent 而不是自己编写 shouldComponentUpdate 。但 React.PureComponent 仅会进项浅比较，因此如果 props 或者 state 可能会导致浅比较失败的情况下就不能使用 React.PureComponent 。")])])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/react-api.html#reactmemo",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用React.memo"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://github.com/reduxjs/reselect",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用Reselect自动缓存数据"),n("OutboundLink")],1)])])]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6908895801116721160",target:"_blank",rel:"noopener noreferrer"}},[t._v("掘金：React性能优化"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/optimizing-performance.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("React官方：React性能优化"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"_5-webpack打包优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-webpack打包优化"}},[t._v("🌙")]),t._v(" 5.webpack打包优化")]),t._v(" "),n("h3",{attrs:{id:"_5-1打包分析webpack-bundle-analyzer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1打包分析webpack-bundle-analyzer"}},[t._v("🌙")]),t._v(" 5.1打包分析webpack-bundle-analyzer")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" webpack-bundle-analyzer -D\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//webpack.config.prod.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" BundleAnalyzerPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-bundle-analyzer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BundleAnalyzerPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" merge "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-merge'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" baseWebpackConfig "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./webpack.config.base'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("merge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("baseWebpackConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//....")]),t._v("\n    plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleAnalyzerPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("h3",{attrs:{id:"_5-2-升级webpack"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-升级webpack"}},[t._v("🌙")]),t._v(" 5.2 升级webpack")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000022693214",target:"_blank",rel:"noopener noreferrer"}},[t._v("一次webpack3升级为webpack4的实践"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"_5-3配置source-map"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3配置source-map"}},[t._v("🌙")]),t._v(" 5.3配置source-map")]),t._v(" "),n("p",[t._v("当添加"),n("code",[t._v("source-map")]),t._v("后，在"),n("code",[t._v("dist")]),t._v("文件夹之后就会生成一个"),n("code",[t._v(".map")]),t._v("文件")]),t._v(" "),n("p",[t._v("在生产环境建议使用，cheap-module-source-map\n在开发环境中建议使用，cheap-module-eval-source-map")]),t._v(" "),n("p",[t._v("eval：的特点：")]),t._v(" "),n("ol",[n("li",[t._v("打包速度最快")]),t._v(" "),n("li",[t._v("针对于复杂的代码eval提示出来的错误坑可能不全")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//代表的为开发环境")]),t._v("\n    devtool"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inline-source-map"')]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//代表的是当我打包之后，在dist文件下不会生成一个.map的文件，但是会在index.js中生成一个base64的字符串")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h3",{attrs:{id:"_5-4-指定打包文件exclude-include"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-指定打包文件exclude-include"}},[t._v("🌙")]),t._v(" 5.4 指定打包文件"),n("code",[t._v("exclude/include")])]),t._v(" "),n("p",[t._v("我们可以通过 exclude、include 配置来确保转译尽可能少的文件。顾名思义，exclude 指定要排除的文件，include 指定要包含的文件。\nexclude 的优先级高于 include，在 include 和 exclude 中使用绝对路径数组，尽量避免 exclude，更倾向于使用 include。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//webpack.config.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    module"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js[x]?$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                use"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                include"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("h3",{attrs:{id:"_5-5使用缓存cache-loader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-5使用缓存cache-loader"}},[t._v("🌙")]),t._v(" 5.5使用缓存cache-loader")]),t._v(" "),n("p",[t._v("在一些性能开销较大的 loader 之前添加 cache-loader，将结果缓存中磁盘中。默认保存在 node_modueles/.cache/cache-loader 目录下。\n首先安装依赖：")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" cache-loader -D\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("复制代码\ncache-loader 的配置很简单，放在其他 loader 之前即可。修改Webpack 的配置如下:")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    \n\n    module"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//我的项目中,babel-loader耗时比较长，所以我给它配置了`cache-loader`")]),t._v("\n        rules"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.jsx?$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                use"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cache-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("p",[t._v("如果只打算给 "),n("code",[t._v("babel-loader")]),t._v(" 配置 "),n("code",[t._v("cache")]),t._v(" 的话，也可以不使用 "),n("code",[t._v("cache-loader")]),t._v("，给 "),n("code",[t._v("babel-loader")]),t._v(" 增加选项 "),n("code",[t._v("cacheDirectory")]),t._v("。")]),t._v(" "),n("h3",{attrs:{id:"_5-6多线程构建thread-loader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-6多线程构建thread-loader"}},[t._v("🌙")]),t._v(" 5.6多线程构建thread-loader")]),t._v(" "),n("p",[n("code",[t._v("thread-loader")]),t._v(" 会将您的 loader 放置在一个 "),n("code",[t._v("worker")]),t._v(" 池里面运行，以达到多线程构建。")]),t._v(" "),n("h3",{attrs:{id:"_5-7开启多进程压缩terser-webpack-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-7开启多进程压缩terser-webpack-plugin"}},[t._v("🌙")]),t._v(" 5.7开启多进程压缩"),n("a",{attrs:{href:"https://webpack.docschina.org/plugins/terser-webpack-plugin/",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("terser-webpack-plugin")]),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" TerserPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'terser-webpack-plugin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  optimization"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    minimize"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    minimizer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TerserPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        parallel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nNum\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("h3",{attrs:{id:"_5-8缓存第一次构建hard-source-webpack-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-8缓存第一次构建hard-source-webpack-plugin"}},[t._v("🌙")]),t._v(" 5.8缓存第一次构建"),n("code",[t._v("hard-source-webpack-plugin")])]),t._v(" "),n("p",[t._v("配置 "),n("code",[t._v("hard-source-webpack-plugin")]),t._v("，首次构建时间没有太大变化，但是第二次开始，构建时间大约可以节约 80%。")]),t._v(" "),n("h3",{attrs:{id:"_5-9noparse标记不进行转化和解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-9noparse标记不进行转化和解析"}},[t._v("🌙")]),t._v(" 5.9noParse标记不进行转化和解析")]),t._v(" "),n("p",[t._v("如果一些第三方模块没有"),n("code",[t._v("AMD/CommonJS")]),t._v("规范版本，可以使用 "),n("code",[t._v("noParse")]),t._v(" 来标识这个模块，这样 Webpack 会引入这些模块，但是不进行转化和解析，从而提升 Webpack 的构建性能 ，例如：jquery 、lodash。")]),t._v(" "),n("h3",{attrs:{id:"_5-10配置resolve加快查找模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-10配置resolve加快查找模块"}},[t._v("🌙")]),t._v(" 5.10配置resolve加快查找模块")]),t._v(" "),n("p",[t._v("resolve 配置 webpack 如何寻找模块所对应的文件")]),t._v(" "),n("h3",{attrs:{id:"_5-11-ignoreplugin忽略第三方包指定目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-11-ignoreplugin忽略第三方包指定目录"}},[t._v("🌙")]),t._v(" 5.11 "),n("a",{attrs:{href:"https://webpack.docschina.org/plugins/ignore-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("IgnorePlugin"),n("OutboundLink")],1),t._v("忽略第三方包指定目录")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//webpack.config.js")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//忽略 moment 下的 ./locale 目录")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IgnorePlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^\\.\\/locale$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("moment$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("h3",{attrs:{id:"_5-12externals不打包使用cdn引入的js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-12externals不打包使用cdn引入的js"}},[t._v("🌙")]),t._v(" 5.12externals不打包使用CDN引入的js")]),t._v(" "),n("h3",{attrs:{id:"_5-13使用dllplugin拆分bundles"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-13使用dllplugin拆分bundles"}},[t._v("🌙")]),t._v(" 5.13使用"),n("a",{attrs:{href:"https://webpack.docschina.org/plugins/dll-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("DllPlugin"),n("OutboundLink")],1),t._v("拆分bundles")]),t._v(" "),n("p",[t._v("DllPlugin 和 DLLReferencePlugin 可以实现拆分 bundles，并且可以大大提升构建速度，DllPlugin 和 DLLReferencePlugin 都是 webpack 的内置模块。")]),t._v(" "),n("h3",{attrs:{id:"_5-14抽离公共代码optimization-splitchunks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-14抽离公共代码optimization-splitchunks"}},[t._v("🌙")]),t._v(" 5.14抽离公共代码optimization.splitChunks")]),t._v(" "),n("p",[t._v("抽离公共代码是对于多页应用来说的，如果多个页面引入了一些公共模块，那么可以把这些公共的模块抽离出来，单独打包。公共代码只需要下载一次就缓存起来了，避免了重复下载。\n抽离公共代码对于单页应用和多页应该在配置上没有什么区别，都是配置在 optimization.splitChunks 中。")]),t._v(" "),n("h3",{attrs:{id:"_5-15tree-shaking"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-15tree-shaking"}},[t._v("🌙")]),t._v(" 5.15"),n("a",{attrs:{href:"https://webpack.docschina.org/blog/2020-10-10-webpack-5-release/#nested-tree-shaking",target:"_blank",rel:"noopener noreferrer"}},[t._v("tree-shaking"),n("OutboundLink")],1)]),t._v(" "),n("ul",[n("li",[t._v("嵌套的 tree-shaking")]),t._v(" "),n("li",[t._v("内部模块 tree-shaking")]),t._v(" "),n("li",[t._v("CommonJs Tree Shaking")])]),t._v(" "),n("p",[t._v("webpack4只支持ES6的"),n("code",[t._v("tree shaking")]),t._v("，不支持 "),n("code",[t._v("CommonJs")]),t._v(" 导出和 "),n("code",[t._v("require()")]),t._v(" 。")]),t._v(" "),n("p",[t._v("webpack 5 增加了对一些 CommonJs 构造的支持，允许消除未使用的 CommonJs 导出，并从 require() 调用中跟踪引用的导出名称。")]),t._v(" "),n("blockquote",[n("p",[t._v("理解： 你可以将应用程序想象成一棵树。绿色表示实际用到的 source code(源码) 和 library(库)，是树上活的树叶。灰色表示未引用代码，是秋天树上枯萎的树叶。为了除去死去的树叶，你必须摇动这棵树，使它们落下。")])]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/32831172",target:"_blank",rel:"noopener noreferrer"}},[t._v("你的Tree-Shaking并没什么卵用"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844903544756109319",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree-Shaking性能优化实践 - 原理篇"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844903544760336398",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree-Shaking性能优化实践 - 实践篇"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_5-16-scope-hosting-作用域提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-16-scope-hosting-作用域提升"}},[t._v("🌙")]),t._v(" 5.16 scope hosting 作用域提升")]),t._v(" "),n("p",[t._v("变量提升，可以减少一些变量声明。在生产环境下，默认开启。")]),t._v(" "),n("h3",{attrs:{id:"_5-17babel-配置的优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-17babel-配置的优化"}},[t._v("🌙")]),t._v(" 5.17babel 配置的优化")]),t._v(" "),n("p",[t._v("如果你对 babel 还不太熟悉的话，那么可以阅读这篇文章：不容错过的 Babel7 知识。\n在不配置 @babel/plugin-transform-runtime 时，babel 会使用很小的辅助函数来实现类似 _createClass 等公共方法。默认情况下，它将被注入(inject)到需要它的每个文件中。但是这样的结果就是导致构建出来的JS体积变大。\n我们也并不需要在每个 js 中注入辅助函数，因此我们可以使用 @babel/plugin-transform-runtime，@babel/plugin-transform-runtime 是一个可以重复使用 Babel 注入的帮助程序，以节省代码大小的插件。\n因此我们可以在 .babelrc 中增加 @babel/plugin-transform-runtime 的配置。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"presets"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plugins"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/plugin-transform-runtime"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("h2",{attrs:{id:"_6首屏优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6首屏优化"}},[t._v("🌙")]),t._v(" 6首屏优化")]),t._v(" "),n("h3",{attrs:{id:"_6-1cdn分发-减少传输距离"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1cdn分发-减少传输距离"}},[t._v("🌙")]),t._v(" 6.1CDN分发，减少传输距离")]),t._v(" "),n("p",[t._v("全称:"),n("code",[t._v("Content Delivery Network")]),t._v("或"),n("code",[t._v("Content Distribute Network")]),t._v("，即内容分发网络。")]),t._v(" "),n("p",[t._v("通过在网络各处放置"),n("strong",[t._v("节点服务器")]),t._v("，这些节点之间会动态的互相传输内容，CDN系统能够根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。")]),t._v(" "),n("p",[t._v("目的是就近取得所需内容，解决Internet网络拥挤的状况，提高用户访问网站的响应速度。")]),t._v(" "),n("h3",{attrs:{id:"_6-2后端数据缓存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-2后端数据缓存"}},[t._v("🌙")]),t._v(" 6.2后端数据缓存")]),t._v(" "),n("p",[t._v("数据库查询缓存是可以设置缓存的，这个对于处于高频率的请求很有用。浏览器一般不会对"),n("code",[t._v("content-type: application/json")]),t._v("的接口进行缓存，所以有时需要我们手动地为接口设置缓存。")]),t._v(" "),n("p",[t._v("比如一个用户的签到状态，它的缓存时间可以设置到明天之前。")]),t._v(" "),n("h3",{attrs:{id:"_6-3前端的资源动态加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-3前端的资源动态加载"}},[t._v("🌙")]),t._v(" 6.3前端的资源动态加载")]),t._v(" "),n("ul",[n("li",[t._v("路由懒加载")])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000022265737",target:"_blank",rel:"noopener noreferrer"}},[t._v("react路由懒加载和vue路由懒加载 "),n("OutboundLink")],1)]),t._v(" "),n("ul",[n("li",[n("p",[t._v("组件懒加载")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/code-splitting.html#import",target:"_blank",rel:"noopener noreferrer"}},[t._v("通过动态 import() 语法"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://react.css88.com/docs/code-splitting.html#reactlazy",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用React.lazy懒加载"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[t._v("动态渲染"),n("a",{attrs:{href:"https://react-window.now.sh/#/examples/list/fixed-size",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-window"),n("OutboundLink")],1)])])])]),t._v(" "),n("li",[n("p",[t._v("图片懒加载")])])]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844903482164510734",target:"_blank",rel:"noopener noreferrer"}},[t._v("web 前端图片懒加载实现原理"),n("OutboundLink")],1)])]),t._v(" "),n("ul",[n("li",[t._v("图片预加载\nHTML5中有原生的预加载属性，名为"),n("code",[t._v("prefetch")]),t._v("和"),n("code",[t._v("prerender")]),t._v(":")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--IE11及以上，兼容性更好--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(url)"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--prefetcher:浏览器会在后台（页面不可见）的位置预加载,相比prefetch，兼容性要差一些--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prefetcher"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(url)"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.zhangxinxu.com/wordpress/2016/06/image-preload-based-on-user-behavior/",target:"_blank",rel:"noopener noreferrer"}},[t._v("张鑫旭:基于用户行为的图片等资源预加载"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_6-4减少请求的数量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-4减少请求的数量"}},[t._v("🌙")]),t._v(" 6.4减少请求的数量")]),t._v(" "),n("h3",{attrs:{id:"_6-5使用http压缩-gzip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-5使用http压缩-gzip"}},[t._v("🌙")]),t._v(" 6.5使用http压缩，GZIP")]),t._v(" "),n("ul",[n("li",[t._v("验证是否开启GZIP：")])]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -H "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Accept-Encoding: gzip"')]),t._v(" -I https://juejin.cn/post/6844903825585897485"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#heading-4")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("Koa服务开启GZIP")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compress "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-compress'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compress")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("ul",[n("li",[t._v("webpack开启GZIP：")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CompressionWebpackPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'compression-webpack-plugin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nplugins"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompressionWebpackPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        asset"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[path].gz[query]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 目标文件名")]),t._v("\n        algorithm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gzip'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用gzip压缩")]),t._v("\n        test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RegExp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\\\.(js|css)$'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 压缩 js 与 css")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        threshold"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10240")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 资源文件大于10240B=10kB时会被压缩")]),t._v("\n        minRatio"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最小压缩比达到0.8时才会被压缩")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("更进一步，使用更先进的压缩算法，进一步压缩——"),n("a",{attrs:{href:"https://seo.g2soft.net/AMP/2019/05/22/brotli-vs-gzip.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Brotli"),n("OutboundLink")],1),t._v("("),n("a",{attrs:{href:"https://caniuse.com/brotli",target:"_blank",rel:"noopener noreferrer"}},[t._v("Brotli兼容性差"),n("OutboundLink")],1),t._v(")")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000012571492",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端性能优化之gzip "),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.upyun.com/tech/article/257/%E5%90%AF%E7%94%A8%20Brotli%20%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95%EF%BC%8C%E5%AF%B9%E6%AF%94%20Gzip%20%E5%8E%8B%E7%BC%A9%20CDN%20%E6%B5%81%E9%87%8F%E5%86%8D%E5%87%8F%E5%B0%91%2020%25.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("启用 Brotli 压缩算法，对比 Gzip 压缩 CDN 流量再减少 20%"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_6-6页面使用骨架屏"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-6页面使用骨架屏"}},[t._v("🌙")]),t._v(" 6.6页面使用骨架屏")]),t._v(" "),n("p",[t._v("用css提前占好位置，当资源加载完成即可填充，减少页面的回流与重绘，同时还能给用户最直接的反馈。\n"),n("a",{attrs:{href:"https://github.com/buildo/react-placeholder",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-placeholder"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("使用css伪类："),n("a",{attrs:{href:"https://segmentfault.com/a/1190000020437426",target:"_blank",rel:"noopener noreferrer"}},[t._v("只要css就能实现的骨架屏方案"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://codepen.io/keekuun/pen/yLOMNWz?editors=1010",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS3- Loader & Spinners"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"_6-7使用ssr渲染"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-7使用ssr渲染"}},[t._v("🌙")]),t._v(" 6.7使用ssr渲染")]),t._v(" "),n("ul",[n("li",[n("p",[n("RouterLink",{attrs:{to:"/frontEnd/VAR/React学习笔记/React进阶之-Next.html"}},[t._v("react框架next")])],1)]),t._v(" "),n("li",[n("p",[n("RouterLink",{attrs:{to:"/frontEnd/VAR/Vue学习笔记/Vue-SSR Nuxt.html"}},[t._v("vue框架nuxt")])],1)])]),t._v(" "),n("h3",{attrs:{id:"_6-8使用async和defer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-8使用async和defer"}},[t._v("🌙")]),t._v(" 6.8使用async和defer")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://segmentfault.com/q/1010000000640869",target:"_blank",rel:"noopener noreferrer"}},[t._v("defer和async的区别 "),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://harttle.land/2016/05/18/async-javascript-loading.html#",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web 性能优化：异步加载脚本"),n("OutboundLink")],1)])])]),t._v(" "),n("h3",{attrs:{id:"_6-9合理选择图片格式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-9合理选择图片格式"}},[t._v("🌙")]),t._v(" 6.9合理选择图片格式")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://jakearchibald.com/2020/avif-has-landed/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AVIF has landed"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("picture")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--If this type is supported, use this--\x3e")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("source")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("image/avif"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("srcset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("snow.avif"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--…else this--\x3e")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Hut in the snow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("snow.jpg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("picture")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("h3",{attrs:{id:"_6-10-使用http缓存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-10-使用http缓存"}},[t._v("🌙")]),t._v(" 6.10 使用HTTP缓存")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://harttle.land/2017/04/04/using-http-cache.html#",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 HTTP 缓存：Etag, Last-Modified 与 Cache-Control"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"_6-11-浏览器缓存-localstorage"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-11-浏览器缓存-localstorage"}},[t._v("🌙")]),t._v(" 6.11 浏览器缓存(localStorage)")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844903570941165582",target:"_blank",rel:"noopener noreferrer"}},[t._v("localstorage 必知必会"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6857315310908506119#heading-4",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 localStorage 的最佳实践"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.html5rocks.com/en/tutorials/webdatabase/todo/",target:"_blank",rel:"noopener noreferrer"}},[t._v("A Simple TODO list using HTML5 WebDatabases"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("兼容性："),n("a",{attrs:{href:"https://caniuse.com/?search=localstorage",target:"_blank",rel:"noopener noreferrer"}},[t._v("支持IE8+"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取指定key本地存储的值")]),t._v("\nlocalStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将value存储到key字段")]),t._v("\nlocalStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//删除指定key本地存储的值")]),t._v("\nlocalStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("p",[t._v("cookie最大的缺陷是在每一次HTTP请求中都会携带所有符合规则的cookie数据（最大4k），这会"),n("a",{attrs:{rel:"nofollow",href:"http://yuiblog.com/blog/2007/03/01/performance-research-part-3/",target:"_blank"}},[t._v("增加请求响应时间")]),t._v(",特别是XHR请求.")]),t._v(" "),n("p",[t._v("在HTML5中使用"),n("code",[t._v("sessionStorage")]),t._v("和"),n("code",[t._v("localStorage")]),t._v("(最大5M)代替cookie是更好的做法:")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if localStorage is present, use that")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localStorage'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("localStorage "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// easy object property API")]),t._v("\n  localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wishlist "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'["unicorn", "Narwhal", "deathbear"]\'')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// without sessionStorage we'll have to use a far-future cookie")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with document.cookie's awkward API")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" date "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("365")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" expires "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toGMTString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cookiestr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'wishlist=["unicorn", "Narwhal", "deathbear"];\'')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' expires='")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" expires "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'; path=/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cookiestr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br")])]),n("h2",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("🌙")]),t._v(" 小结")]),t._v(" "),n("p",[t._v("web性能优化是一个系统的工程，需要各方面一起配合。大概从两个方向入手：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("减少资源体积")]),t._v(" "),n("ul",[n("li",[t._v("css压缩("),n("a",{attrs:{href:"https://webpack.docschina.org/plugins/mini-css-extract-plugin/#minimizing-for-production",target:"_blank",rel:"noopener noreferrer"}},[t._v("mini-css-extract-plugin"),n("OutboundLink")],1),t._v(")")]),t._v(" "),n("li",[t._v("js压缩（"),n("a",{attrs:{href:"https://webpack.docschina.org/plugins/terser-webpack-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("terser-webpack-plugin"),n("OutboundLink")],1),t._v("）")]),t._v(" "),n("li",[t._v("html压缩("),n("a",{attrs:{href:"https://webpack.docschina.org/loaders/html-loader/#boolean",target:"_blank",rel:"noopener noreferrer"}},[t._v("html-loader"),n("OutboundLink")],1),t._v(")")]),t._v(" "),n("li",[t._v("http压缩（GZIP/br，header压缩-HTTP2）")]),t._v(" "),n("li",[t._v("图片压缩（使用AVIF、webpy）")]),t._v(" "),n("li",[t._v("减少cookie体积")])])]),t._v(" "),n("li",[n("p",[t._v("控制请求数")]),t._v(" "),n("ul",[n("li",[t._v("DNS解析")]),t._v(" "),n("li",[t._v("资源合并（js、css、html）")]),t._v(" "),n("li",[t._v("图片合并（雪碧图、base64）")]),t._v(" "),n("li",[t._v("减少接口数量")]),t._v(" "),n("li",[t._v("并行加载（使用async/defer、ajax）")]),t._v(" "),n("li",[t._v("合理使用缓存（http缓存、localstorage）")]),t._v(" "),n("li",[t._v("懒加载（图片、路由、组件）和预加载")]),t._v(" "),n("li",[t._v("静态资源CDN")]),t._v(" "),n("li",[t._v("使用http2")]),t._v(" "),n("li",[t._v("使用websocket")])])])]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6892994632968306702",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端性能优化 24 条建议"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6911472693405548557",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端性能优化"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://blog.thankbabe.com/2017/07/05/fore-end-optimize/",target:"_blank",rel:"noopener noreferrer"}},[t._v("大话WEB前端性能优化基本套路"),n("OutboundLink")],1)])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000002884052",target:"_blank",rel:"noopener noreferrer"}},[t._v("[译]让web app更快的HTML5最佳实践"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/326611057",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端优化大全-你想要的我全都有"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/121056616",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端性能优化 24 条建议(2020)"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844904093463347208",target:"_blank",rel:"noopener noreferrer"}},[t._v("带你深度解锁webpack系列(优化篇)"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/berwin/Blog/issues/23",target:"_blank",rel:"noopener noreferrer"}},[t._v("嗨，送你一张Web性能优化地图"),n("OutboundLink")],1)])]),t._v(" "),n("p",[n("img",{attrs:{src:a(680),alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);