(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{612:function(t,s,n){t.exports=n.p+"assets/img/http-module.27d7f2e1.png"},717:function(t,s,n){"use strict";n.r(s);var a=n(10),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nodejsä¹‹httpæ¨¡å—å­¦ä¹ ç¬”è®°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodejsä¹‹httpæ¨¡å—å­¦ä¹ ç¬”è®°"}},[t._v("ğŸŒ™")]),t._v(" NodeJSä¹‹HTTPæ¨¡å—å­¦ä¹ ç¬”è®°")]),t._v(" "),a("p",[a("img",{attrs:{src:n(612),alt:"HTTPæ¨¡å—"}})]),t._v(" "),a("h2",{attrs:{id:"_1-ç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç®€ä»‹"}},[t._v("ğŸŒ™")]),t._v(" 1.ç®€ä»‹")]),t._v(" "),a("p",[t._v("NodeJS ä¸­çš„ HTTP æ¥å£æ—¨åœ¨æ”¯æŒä¼ ç»Ÿä¸Šéš¾ä»¥ä½¿ç”¨çš„åè®®çš„è®¸å¤šç‰¹æ€§ã€‚ ç‰¹åˆ«æ˜¯ï¼Œå¤§å—çš„ã€å¯èƒ½å—ç¼–ç çš„æ¶ˆæ¯ã€‚ æ¥å£æ°¸è¿œä¸ä¼šç¼“å†²æ•´ä¸ªè¯·æ±‚æˆ–å“åº”ï¼Œæ‰€ä»¥ç”¨æˆ·èƒ½å¤Ÿ"),a("strong",[t._v("æµå¼ä¼ è¾“")]),t._v("æ•°æ®ã€‚--- æ‘˜è‡ªå®˜ç½‘"),a("a",{attrs:{href:"http://nodejs.cn/api/http.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("httpï¼ˆHTTPï¼‰"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_1-ä½¿ç”¨æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä½¿ç”¨æ–¹å¼"}},[t._v("ğŸŒ™")]),t._v(" 1.ä½¿ç”¨æ–¹å¼")]),t._v(" "),a("p",[t._v("è¦ä½¿ç”¨ HTTP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œå¿…é¡» "),a("code",[t._v("require('http')")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸éœ€è¦å®ä¾‹åŒ–,ç›´æ¥ä½¿ç”¨")]),t._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"_2-ä»module-exportsè¯´èµ·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä»module-exportsè¯´èµ·"}},[t._v("ğŸŒ™")]),t._v(" 2.ä»module.exportsè¯´èµ·")]),t._v(" "),a("p",[t._v("æŸ¥çœ‹httpæ¨¡å—æºç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("METHODS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" methods"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// HTTPæ–¹æ³•")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STATUS_CODES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ‡å‡† HTTP å“åº”çŠ¶æ€ç ")]),t._v("\n  Agent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" httpAgent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç®¡ç† HTTP å®¢æˆ·ç«¯çš„è¿æ¥æŒä¹…æ€§å’Œé‡ç”¨")]),t._v("\n  ClientRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯·æ±‚ç±»")]),t._v("\n  IncomingMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¿é—®å“åº”çŠ¶æ€ã€æ¶ˆæ¯å¤´ã€ä»¥åŠæ•°æ®")]),t._v("\n  OutgoingMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡")]),t._v("\n  ServerResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å“åº”ç±»")]),t._v("\n  createServer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºæœåŠ¡ new Server")]),t._v("\n  get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºgetè¯·æ±‚api")]),t._v("\n  request "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºå„ç§httpè¯·æ±‚api")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[t._v("è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œhttpæ¨¡å—é»˜è®¤å°†å„ç§æ–¹æ³•å¯¼å‡ºï¼Œå®ƒæ²¡æœ‰å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„æ„é€ æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡"),a("code",[t._v("http.createServer")]),t._v("è¿™ç§æ–¹å¼è°ƒç”¨ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_3-http-methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-http-methods"}},[t._v("ğŸŒ™")]),t._v(" 3.http.METHODS")]),t._v(" "),a("p",[t._v("è¿”å›ç±»å‹ï¼š"),a("code",[t._v("string[]")])]),t._v(" "),a("p",[t._v("è§£æå™¨æ”¯æŒçš„ HTTP æ–¹æ³•åˆ—è¡¨ï¼Œä¾èµ–äº"),a("code",[t._v("_http_common")]),t._v("æ¨¡å—ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" methods "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_http_common'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("METHODS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" methods"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("è¿™é‡Œ"),a("code",[t._v("http.METHODS")]),t._v("å¯¹"),a("code",[t._v("_http_common")]),t._v("æ¨¡å—ä¸­çš„"),a("code",[t._v("methods")]),t._v("åšäº†ä¸€ä¸ªæµ…æ‹·è´å¹¶æ’åºã€‚")]),t._v(" "),a("h2",{attrs:{id:"_4-http-status-codes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-http-status-codes"}},[t._v("ğŸŒ™")]),t._v(" 4.http.STATUS_CODES")]),t._v(" "),a("p",[t._v("è¿”å›ç±»å‹ï¼š"),a("code",[t._v("Object")])]),t._v(" "),a("p",[t._v("æ‰€æœ‰æ ‡å‡† HTTP å“åº”çŠ¶æ€ç çš„é›†åˆï¼Œä»¥åŠæ¯ä¸ªçŠ¶æ€ç çš„ç®€çŸ­æè¿°ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STATUS_CODES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Continue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Switching Protocols'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("102")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Processing'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 2518, obsoleted by RFC 4918")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("103")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Early Hints'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OK'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("201")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Created'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("202")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Accepted'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("203")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Non-Authoritative Information'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'No Content'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("205")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Reset Content'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("206")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Partial Content'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("207")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Multi-Status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 4918")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("208")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Already Reported'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("226")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'IM Used'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Multiple Choices'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 7231")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Moved Permanently'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("302")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Found'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("303")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'See Other'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("304")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Not Modified'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("305")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Use Proxy'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("307")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Temporary Redirect'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("308")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Permanent Redirect'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 7238")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Bad Request'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Unauthorized'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("402")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Payment Required'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Forbidden'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Not Found'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("405")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Method Not Allowed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("406")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Not Acceptable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("407")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Proxy Authentication Required'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("408")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Request Timeout'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("409")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Conflict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("410")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Gone'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("411")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Length Required'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("412")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Precondition Failed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("413")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Payload Too Large'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("414")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'URI Too Long'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("415")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Unsupported Media Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("416")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Range Not Satisfiable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("417")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Expectation Failed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("418")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'I\\'m a Teapot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 7168")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("421")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Misdirected Request'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("422")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Unprocessable Entity'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 4918")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("423")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Locked'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 4918")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("424")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Failed Dependency'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 4918")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("425")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Unordered Collection'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 4918")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("426")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Upgrade Required'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 2817")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("428")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Precondition Required'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 6585")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("429")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Too Many Requests'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 6585")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("431")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Request Header Fields Too Large'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 6585")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("451")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Unavailable For Legal Reasons'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Internal Server Error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("501")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Not Implemented'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Bad Gateway'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Service Unavailable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Gateway Timeout'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("505")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HTTP Version Not Supported'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("506")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Variant Also Negotiates'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 2295")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("507")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Insufficient Storage'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 4918")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("508")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Loop Detected'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("509")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Bandwidth Limit Exceeded'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("510")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Not Extended'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 2774")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("511")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Network Authentication Required'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RFC 6585")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br"),a("span",{staticClass:"line-number"},[t._v("53")]),a("br"),a("span",{staticClass:"line-number"},[t._v("54")]),a("br"),a("span",{staticClass:"line-number"},[t._v("55")]),a("br"),a("span",{staticClass:"line-number"},[t._v("56")]),a("br"),a("span",{staticClass:"line-number"},[t._v("57")]),a("br"),a("span",{staticClass:"line-number"},[t._v("58")]),a("br"),a("span",{staticClass:"line-number"},[t._v("59")]),a("br"),a("span",{staticClass:"line-number"},[t._v("60")]),a("br"),a("span",{staticClass:"line-number"},[t._v("61")]),a("br"),a("span",{staticClass:"line-number"},[t._v("62")]),a("br"),a("span",{staticClass:"line-number"},[t._v("63")]),a("br"),a("span",{staticClass:"line-number"},[t._v("64")]),a("br"),a("span",{staticClass:"line-number"},[t._v("65")]),a("br")])]),a("h2",{attrs:{id:"_5-http-createserveræ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-http-createserveræ–¹æ³•"}},[t._v("ğŸŒ™")]),t._v(" 5.http.createServeræ–¹æ³•")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("options")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[a("code",[t._v("IncomingMessage")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.IncomingMessage"),a("OutboundLink")],1),t._v(" æŒ‡å®šè¦ä½¿ç”¨çš„ "),a("code",[t._v("IncomingMessage")]),t._v(" ç±»ã€‚ç”¨äºæ‰©å±•åŸå§‹çš„ "),a("code",[t._v("IncomingMessage")]),t._v("ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("IncomingMessage")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("ServerResponse")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/rMXoZ1",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.ServerResponse"),a("OutboundLink")],1),t._v(" æŒ‡å®šè¦ä½¿ç”¨çš„ "),a("code",[t._v("ServerResponse")]),t._v(" ç±»ã€‚ç”¨äºæ‰©å±•åŸå§‹çš„ "),a("code",[t._v("ServerResponse")]),t._v("ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("ServerResponse")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("insecureHTTPParser")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1),t._v(" ä½¿ç”¨ä¸å®‰å…¨çš„ HTTP è§£æå™¨ï¼Œå½“ä¸º "),a("code",[t._v("true")]),t._v(" æ—¶æ¥å—æ— æ•ˆçš„ HTTP è¯·æ±‚å¤´ã€‚åº”é¿å…ä½¿ç”¨ä¸å®‰å…¨çš„è§£æå™¨ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œå‚è§ "),a("a",{attrs:{href:"http://nodejs.cn/s/5Bnm43",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("--insecure-http-parser")]),a("OutboundLink")],1),t._v("ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("maxHeaderSize")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" å¯é€‰åœ°ï¼Œé‡å†™æ­¤æœåŠ¡å™¨æ¥æ”¶çš„è¯·æ±‚çš„ "),a("a",{attrs:{href:"http://nodejs.cn/s/HfsyuU",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("--max-http-header-size")]),a("OutboundLink")],1),t._v(" å€¼ï¼Œå³è¯·æ±‚å¤´çš„æœ€å¤§é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ "),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" 16384ï¼ˆ16KBï¼‰ã€‚")])])]),t._v(" "),a("li",[a("code",[t._v("requestListener")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1),t._v("ï¼Œ æ˜¯ä¸€ä¸ªè‡ªåŠ¨æ·»åŠ åˆ° "),a("a",{attrs:{href:"http://nodejs.cn/s/2qCn57",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'request'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶çš„å‡½æ•°ã€‚å‚æ•°(request, response)è§åé¢çš„"),a("code",[t._v("http.clientRequest")]),t._v("å’Œ"),a("code",[t._v("http.ServerResponse")]),t._v("ã€‚")]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/jLiRTh",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.Server"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("æºç è§£è¯»ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  Server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n \t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_http_server'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" requestListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" requestListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[a("code",[t._v("Server")]),t._v("é€šè¿‡"),a("code",[t._v("http.createServer")]),t._v("æ¥å®ä¾‹åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºæœåŠ¡å™¨ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ä¾‹åŒ–")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"_6-http-agentç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-http-agentç±»"}},[t._v("ğŸŒ™")]),t._v(" 6.http.Agentç±»")]),t._v(" "),a("p",[t._v("ç®€ä»‹ï¼š"),a("code",[t._v("Agent")]),t._v(" è´Ÿè´£ç®¡ç† HTTP å®¢æˆ·ç«¯çš„è¿æ¥æŒä¹…æ€§å’Œé‡ç”¨ã€‚å½“ä¸å†ä½¿ç”¨æ—¶æœ€å¥½ "),a("a",{attrs:{href:"http://nodejs.cn/s/qZQu4q",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("destroy()")]),a("OutboundLink")],1),t._v(" "),a("code",[t._v("Agent")]),t._v(" å®ä¾‹ï¼Œå› ä¸ºæœªä½¿ç”¨çš„"),a("code",[t._v("Socket")]),t._v("ä¼šæ¶ˆè€—æ“ä½œç³»ç»Ÿèµ„æºã€‚å‚è§å®˜ç½‘"),a("a",{attrs:{href:"http://nodejs.cn/api/http.html#http_class_http_agent",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.Agent ç±»"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_6-1new-agent-options-æ„é€ æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1new-agent-options-æ„é€ æ–¹æ³•"}},[t._v("ğŸŒ™")]),t._v(" 6.1"),a("code",[t._v("new Agent([options])")]),t._v("æ„é€ æ–¹æ³•")]),t._v(" "),a("p",[a("code",[t._v("options")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1),t._v(" è¦åœ¨ä»£ç†ä¸Šè®¾ç½®çš„å¯é…ç½®é€‰é¡¹é›†ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("keepAlive boolean")]),t._v("ï¼Œ"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("false")]),t._v(", true-å¼€å¯é•¿è¿æ¥ï¼›")]),t._v(" "),a("p",[t._v("ä¸è¦ä¸ "),a("code",[t._v("Connection")]),t._v(" è¯·æ±‚å¤´çš„ "),a("code",[t._v("keep-alive")]),t._v(" å€¼æ··æ·†ã€‚ "),a("code",[t._v("Connection: keep-alive")]),t._v(" è¯·æ±‚å¤´å§‹ç»ˆåœ¨ä½¿ç”¨ä»£ç†æ—¶å‘é€ï¼Œé™¤éæ˜ç¡®æŒ‡å®š "),a("code",[t._v("Connection")]),t._v(" è¯·æ±‚å¤´ã€æˆ–è€… "),a("code",[t._v("keepAlive")]),t._v(" å’Œ "),a("code",[t._v("maxSockets")]),t._v(" é€‰é¡¹åˆ†åˆ«è®¾ç½®ä¸º "),a("code",[t._v("false")]),t._v(" å’Œ "),a("code",[t._v("Infinity")]),t._v("ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å°†ä¼šä½¿ç”¨ "),a("code",[t._v("Connection: close")]),t._v("ã€‚")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://my.oschina.net/antianlu/blog/261105",target:"_blank",rel:"noopener noreferrer"}},[t._v("NodeJSå¦‚ä½•å®ç°çœŸæ­£çš„é•¿è¿æ¥ï¼Ÿ"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.yuque.com/egg/nodejs/keep-alive-agent-econnreset",target:"_blank",rel:"noopener noreferrer"}},[t._v("è§£å†³ä½¿ç”¨ KeepAlive Agent é‡åˆ°çš„ ECONNRESET"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("keepAliveMsecs")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" å½“ä½¿ç”¨ "),a("code",[t._v("keepAlive")]),t._v(" é€‰é¡¹æ—¶ï¼ŒæŒ‡å®šç”¨äº TCP Keep-Alive æ•°æ®åŒ…çš„"),a("a",{attrs:{href:"http://nodejs.cn/s/qqbgUD",target:"_blank",rel:"noopener noreferrer"}},[t._v("åˆå§‹å»¶è¿Ÿ"),a("OutboundLink")],1),t._v("ã€‚å½“ "),a("code",[t._v("keepAlive")]),t._v(" é€‰é¡¹ä¸º "),a("code",[t._v("false")]),t._v(" æˆ– "),a("code",[t._v("undefined")]),t._v(" æ—¶åˆ™å¿½ç•¥ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("1000")]),t._v("ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("maxSockets")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" æ¯ä¸ªä¸»æœºå…è®¸çš„"),a("code",[t._v("Socket")]),t._v("çš„æœ€å¤§æ•°é‡ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("Infinity")]),t._v("ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("maxFreeSockets")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" åœ¨ç©ºé—²çŠ¶æ€ä¸‹ä¿æŒæ‰“å¼€çš„"),a("code",[t._v("Socket")]),t._v("çš„æœ€å¤§æ•°é‡ã€‚ä»…å½“ "),a("code",[t._v("keepAlive")]),t._v(" è¢«è®¾ç½®ä¸º "),a("code",[t._v("true")]),t._v(" æ—¶æ‰ç›¸å…³ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("256")]),t._v("ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("timeout")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" "),a("code",[t._v("Socket")]),t._v("çš„è¶…æ—¶æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚è¿™ä¼šåœ¨"),a("code",[t._v("Socket")]),t._v("è¢«è¿æ¥ä¹‹åè®¾ç½®è¶…æ—¶æ—¶é—´ã€‚")])])]),t._v(" "),a("p",[t._v("è¦é…ç½®å…¶ä¸­ä»»ä½•ä¸€ä¸ªï¼Œåˆ™å¿…é¡»åˆ›å»ºè‡ªå®šä¹‰çš„ "),a("a",{attrs:{href:"http://nodejs.cn/s/HRCnER",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("http.Agent")]),a("OutboundLink")],1),t._v(" å®ä¾‹:")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" keepAliveAgent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Agent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" keepAlive"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\noptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" keepAliveAgent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onResponseCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"_6-2-agent-createconnection-options-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-agent-createconnection-options-callback"}},[t._v("ğŸŒ™")]),t._v(" 6.2 "),a("code",[t._v("agent.createConnection(options[, callback])")])]),t._v(" "),a("p",[t._v("ç”Ÿæˆç”¨äº HTTP è¯·æ±‚çš„"),a("code",[t._v("Socket")]),t._v("æˆ–æµã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤å‡½æ•°ä¸ "),a("a",{attrs:{href:"http://nodejs.cn/s/xu7F69",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("net.createConnection()")]),a("OutboundLink")],1),t._v(" ç›¸åŒã€‚")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("options")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1),t._v(" åŒ…å«è¿æ¥è¯¦ç»†ä¿¡æ¯çš„é€‰é¡¹ã€‚ æŸ¥çœ‹ "),a("a",{attrs:{href:"http://nodejs.cn/s/xu7F69",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("net.createConnection()")]),a("OutboundLink")],1),t._v(" ä»¥è·å–é€‰é¡¹çš„æ ¼å¼ã€‚")]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1),t._v(" æ¥æ”¶åˆ›å»ºçš„"),a("code",[t._v("Socket")]),t._v("çš„å›è°ƒå‡½æ•°ã€‚")]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"_6-3-agent-keepsocketalive-socket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-agent-keepsocketalive-socket"}},[t._v("ğŸŒ™")]),t._v(" 6.3 "),a("code",[t._v("agent.keepSocketAlive(socket)")])]),t._v(" "),a("p",[a("code",[t._v("socket")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("å½“ "),a("code",[t._v("socket")]),t._v(" ä¸è¯·æ±‚åˆ†ç¦»å¹¶ä¸”å¯ä»¥ç”± "),a("code",[t._v("Agent")]),t._v(" ä¿ç•™æ—¶è°ƒç”¨ã€‚ é»˜è®¤è¡Œä¸ºæ˜¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setKeepAlive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keepAliveMsecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("æ­¤æ–¹æ³•å¯ä»¥ç”±ç‰¹å®šçš„ "),a("code",[t._v("Agent")]),t._v(" å­ç±»é‡å†™ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_6-4-agent-reusesocket-socket-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-agent-reusesocket-socket-request"}},[t._v("ğŸŒ™")]),t._v(" 6.4 "),a("code",[t._v("agent.reuseSocket(socket, request)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("socket")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("request")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2F5RHd",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.ClientRequest"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ç”±äº keep-alive é€‰é¡¹è€Œåœ¨æŒä¹…åŒ–åå°† "),a("code",[t._v("socket")]),t._v(" é™„åŠ åˆ° "),a("code",[t._v("request")]),t._v(" æ—¶è°ƒç”¨ã€‚ é»˜è®¤è¡Œä¸ºæ˜¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("æ­¤æ–¹æ³•å¯ä»¥ç”±ç‰¹å®šçš„ "),a("code",[t._v("Agent")]),t._v(" å­ç±»é‡å†™ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_6-5-agent-destroy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-agent-destroy"}},[t._v("ğŸŒ™")]),t._v(" 6.5 "),a("code",[t._v("agent.destroy()")])]),t._v(" "),a("p",[t._v("é”€æ¯ä»£ç†å½“å‰ä½¿ç”¨çš„æ‰€æœ‰"),a("code",[t._v("Socket")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("é€šå¸¸æ²¡æœ‰å¿…è¦è¿™æ ·åšã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨å¯ç”¨äº† "),a("code",[t._v("keepAlive")]),t._v(" çš„ä»£ç†ï¼Œåˆ™æœ€å¥½åœ¨ä»£ç†ä¸å†ä½¿ç”¨æ—¶æ˜¾å¼å…³é—­ä»£ç†ã€‚ å¦åˆ™ï¼Œåœ¨æœåŠ¡å™¨ç»ˆæ­¢"),a("code",[t._v("Socket")]),t._v("ä¹‹å‰ï¼Œ"),a("code",[t._v("Socket")]),t._v("å¯èƒ½ä¼šæŒ‚èµ·å¾ˆé•¿æ—¶é—´ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_6-6-agent-freesockets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-agent-freesockets"}},[t._v("ğŸŒ™")]),t._v(" 6.6 "),a("code",[t._v("agent.freeSockets")])]),t._v(" "),a("p",[a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å½“å¯ç”¨ "),a("code",[t._v("keepAlive")]),t._v(" æ—¶ä»£ç†æ­£åœ¨ç­‰å¾…ä½¿ç”¨çš„"),a("code",[t._v("Socket")]),t._v("æ•°ç»„ã€‚ ä¸è¦ä¿®æ”¹ã€‚")]),t._v(" "),a("p",[a("code",[t._v("freeSockets")]),t._v(" åˆ—è¡¨ä¸­çš„ socket ä¼šåœ¨ `'timeout' æ—¶è‡ªåŠ¨è¢«é”€æ¯å¹¶ä»æ•°ç»„ä¸­åˆ é™¤ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_6-7-agent-getname-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-7-agent-getname-options"}},[t._v("ğŸŒ™")]),t._v(" 6.7  "),a("code",[t._v("agent.getName(options)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("options")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1),t._v(" ä¸€ç»„é€‰é¡¹ï¼Œä¸ºç”Ÿæˆåç§°æä¾›ä¿¡æ¯ã€‚\n"),a("ul",[a("li",[a("code",[t._v("host")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" è¯·æ±‚å‘é€è‡³çš„æœåŠ¡å™¨çš„åŸŸåæˆ– IP åœ°å€ã€‚")]),t._v(" "),a("li",[a("code",[t._v("port")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" è¿œç¨‹æœåŠ¡å™¨çš„ç«¯å£ã€‚")]),t._v(" "),a("li",[a("code",[t._v("localAddress")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" ä¸ºç½‘ç»œè¿æ¥ç»‘å®šçš„æœ¬åœ°æ¥å£ã€‚")]),t._v(" "),a("li",[a("code",[t._v("family")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("integer"),a("OutboundLink")],1),t._v(" å¦‚æœä¸ç­‰äº "),a("code",[t._v("undefined")]),t._v("ï¼Œåˆ™å¿…é¡»ä¸º 4 æˆ– 6ã€‚")])])]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("è·å–ä¸€ç»„è¯·æ±‚é€‰é¡¹çš„å”¯ä¸€åç§°ï¼Œä»¥åˆ¤å®šä¸€ä¸ªè¿æ¥æ˜¯å¦å¯ä»¥è¢«é‡ç”¨ã€‚ å¯¹äº HTTP ä»£ç†ï¼Œè¿™è¿”å› "),a("code",[t._v("host:port:localAddress")]),t._v(" æˆ– "),a("code",[t._v("host:port:localAddress:family")]),t._v("ã€‚ å¯¹äº HTTPS ä»£ç†ï¼Œè¯¥åç§°åŒ…æ‹¬ CAã€è¯ä¹¦ã€å¯†ç ã€ä»¥åŠå…¶ä»–å¯åˆ¤å®š"),a("code",[t._v("Socket")]),t._v("å¯é‡ç”¨æ€§çš„ HTTPS/TLS ç‰¹æœ‰çš„é€‰é¡¹ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_6-8-agent-maxfreesockets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-8-agent-maxfreesockets"}},[t._v("ğŸŒ™")]),t._v(" 6.8 "),a("code",[t._v("agent.maxFreeSockets")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("é»˜è®¤è®¾ç½®ä¸º 256ã€‚ å¯¹äºå¯ç”¨äº† "),a("code",[t._v("keepAlive")]),t._v(" çš„ä»£ç†ï¼Œè¿™å°†è®¾ç½®åœ¨ç©ºé—²çŠ¶æ€ä¸‹ä¿æŒæ‰“å¼€çš„æœ€å¤§"),a("code",[t._v("Socket")]),t._v("æ•°ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_6-9-agent-requests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-9-agent-requests"}},[t._v("ğŸŒ™")]),t._v(" 6.9 "),a("code",[t._v("agent.requests")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å°šæœªåˆ†é…ç»™"),a("code",[t._v("Socket")]),t._v("çš„è¯·æ±‚é˜Ÿåˆ—ã€‚ ä¸è¦ä¿®æ”¹ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_6-10-agent-sockets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-10-agent-sockets"}},[t._v("ğŸŒ™")]),t._v(" 6.10 "),a("code",[t._v("agent.sockets")])]),t._v(" "),a("ul",[a("li",[t._v("Object](http://nodejs.cn/s/jzn6Ao)")])]),t._v(" "),a("p",[t._v("ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å°šæœªåˆ†é…ç»™"),a("code",[t._v("Socket")]),t._v("çš„è¯·æ±‚é˜Ÿåˆ—ã€‚ ä¸è¦ä¿®æ”¹ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_7-http-clientrequestç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-http-clientrequestç±»"}},[t._v("ğŸŒ™")]),t._v(" 7.http.ClientRequestç±»")]),t._v(" "),a("p",[t._v("ç»§æ‰¿è‡ª: "),a("a",{attrs:{href:"http://nodejs.cn/s/t73H94",target:"_blank",rel:"noopener noreferrer"}},[t._v("Stream"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("æºç è§£è¯»ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("æ­¤å¯¹è±¡ç”± "),a("a",{attrs:{href:"http://nodejs.cn/s/d1myoL",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("http.request()")]),a("OutboundLink")],1),t._v(" å†…éƒ¨åˆ›å»ºå¹¶è¿”å›ã€‚ å®ƒä»£è¡¨æ­£åœ¨è¿›è¡Œä¸­çš„è¯·æ±‚ï¼Œå…¶è¯·æ±‚å¤´å·²è¿›å…¥é˜Ÿåˆ—ã€‚ è¯·æ±‚å¤´ä»ç„¶å¯ä»¥ä½¿ç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/ZBShBB",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("setHeader(name, value)")]),a("OutboundLink")],1),t._v("ã€"),a("a",{attrs:{href:"http://nodejs.cn/s/noVJNv",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("getHeader(name)")]),a("OutboundLink")],1),t._v(" æˆ– "),a("a",{attrs:{href:"http://nodejs.cn/s/vzuErq",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("removeHeader(name)")]),a("OutboundLink")],1),t._v(" API è¿›è¡Œæ”¹å˜ã€‚ å®é™…çš„è¯·æ±‚å¤´å°†ä¼šä¸ç¬¬ä¸€ä¸ªæ•°æ®å—ä¸€èµ·å‘é€ï¼Œæˆ–è€…å½“è°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/GAdV2u",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("request.end()")]),a("OutboundLink")],1),t._v(" æ—¶å‘é€ã€‚")]),t._v(" "),a("p",[t._v("è¦è·å¾—å“åº”ï¼Œåˆ™ä¸ºè¯·æ±‚å¯¹è±¡æ·»åŠ  "),a("a",{attrs:{href:"http://nodejs.cn/s/qwaiK8",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'response'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶ç›‘å¬å™¨ã€‚ å½“æ¥æ”¶åˆ°å“åº”å¤´æ—¶ï¼Œä¼šä»è¯·æ±‚å¯¹è±¡ä¸­è§¦å‘ "),a("a",{attrs:{href:"http://nodejs.cn/s/qwaiK8",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'response'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚ "),a("a",{attrs:{href:"http://nodejs.cn/s/qwaiK8",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'response'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶æ‰§è¡Œæ—¶å…·æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ "),a("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("http.IncomingMessage")]),a("OutboundLink")],1),t._v(" çš„å®ä¾‹ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/qwaiK8",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'response'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶æœŸé—´ï¼Œå¯ä»¥æ·»åŠ ç›‘å¬å™¨åˆ°å“åº”å¯¹è±¡ï¼Œæ¯”å¦‚ç›‘å¬ "),a("code",[t._v("'data'")]),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæ²¡æœ‰æ·»åŠ  "),a("a",{attrs:{href:"http://nodejs.cn/s/qwaiK8",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'response'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåˆ™å“åº”å°†ä¼šè¢«å®Œå…¨åœ°ä¸¢å¼ƒã€‚ å¦‚æœæ·»åŠ äº† "),a("a",{attrs:{href:"http://nodejs.cn/s/qwaiK8",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'response'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåˆ™å¿…é¡»æ¶ˆè´¹å®Œå“åº”å¯¹è±¡ä¸­çš„æ•°æ®ï¼Œæ¯å½“æœ‰ "),a("code",[t._v("'readable'")]),t._v(" äº‹ä»¶æ—¶è°ƒç”¨ "),a("code",[t._v("response.read()")]),t._v("ã€æˆ–æ·»åŠ  "),a("code",[t._v("'data'")]),t._v(" äº‹ä»¶å¤„ç†å‡½æ•°ã€æˆ–é€šè¿‡è°ƒç”¨ "),a("code",[t._v(".resume()")]),t._v(" æ–¹æ³•ã€‚ åœ¨æ¶ˆè´¹å®Œæ•°æ®ä¹‹å‰ï¼Œä¸ä¼šè§¦å‘ "),a("code",[t._v("'end'")]),t._v(" äº‹ä»¶ã€‚ æ­¤å¤–ï¼Œåœ¨è¯»å–æ•°æ®ä¹‹å‰ï¼Œå®ƒå°†ä¼šå ç”¨å†…å­˜ï¼Œè¿™æœ€ç»ˆå¯èƒ½å¯¼è‡´è¿›ç¨‹å†…å­˜ä¸è¶³çš„é”™è¯¯ã€‚")]),t._v(" "),a("p",[t._v("ä¸ "),a("code",[t._v("request")]),t._v(" å¯¹è±¡ä¸åŒï¼Œå¦‚æœå“åº”è¿‡æ—©åœ°å…³é—­ï¼Œåˆ™ "),a("code",[t._v("response")]),t._v(" å¯¹è±¡ä¸ä¼šè§¦å‘ "),a("code",[t._v("'error'")]),t._v(" äº‹ä»¶è€Œæ˜¯è§¦å‘ "),a("code",[t._v("'aborted'")]),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("p",[t._v("Node.js ä¸ä¼šæ£€æŸ¥ Content-Length å’Œå·²ä¼ è¾“çš„è¯·æ±‚ä½“çš„é•¿åº¦æ˜¯å¦ç›¸ç­‰ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-1-http-clientrequestäº‹ä»¶ç›‘å¬"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-http-clientrequestäº‹ä»¶ç›‘å¬"}},[t._v("ğŸŒ™")]),t._v(" 7.1 http.ClientRequestäº‹ä»¶ç›‘å¬")]),t._v(" "),a("h4",{attrs:{id:"_7-1-1-abort-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-1-abort-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 7.1.1 'abort' äº‹ä»¶")]),t._v(" "),a("p",[t._v("å½“è¯·æ±‚è¢«å®¢æˆ·ç«¯ä¸­æ­¢æ—¶è§¦å‘ã€‚ æ­¤äº‹ä»¶ä»…åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ "),a("code",[t._v("abort()")]),t._v(" æ—¶è§¦å‘ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_7-1-2-connect-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-2-connect-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 7.1.2 'connect' äº‹ä»¶")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("response")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[t._v("httpIncomingMessage"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("socket")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("head")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("æ¯æ¬¡æœåŠ¡å™¨ä½¿ç”¨ "),a("code",[t._v("CONNECT")]),t._v(" æ–¹æ³•å“åº”è¯·æ±‚æ—¶éƒ½ä¼šè§¦å‘ã€‚ å¦‚æœæœªç›‘å¬æ­¤äº‹ä»¶ï¼Œåˆ™æ¥æ”¶ "),a("code",[t._v("CONNECT")]),t._v(" æ–¹æ³•çš„å®¢æˆ·ç«¯å°†å…³é—­å…¶è¿æ¥ã€‚")]),t._v(" "),a("p",[t._v("æ­¤äº‹ä»¶ä¿è¯ä¼ å…¥ "),a("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),a("OutboundLink")],1),t._v(" ç±»ï¼ˆ"),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1),t._v(" çš„å­ç±»ï¼‰çš„å®ä¾‹ï¼Œé™¤éç”¨æˆ·æŒ‡å®šäº† "),a("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),a("OutboundLink")],1),t._v(" ä»¥å¤–çš„"),a("code",[t._v("Socket")]),t._v("ç±»å‹ã€‚")]),t._v(" "),a("p",[t._v("å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯¹æ¼”ç¤ºäº†å¦‚ä½•ç›‘å¬ "),a("code",[t._v("'connect'")]),t._v(" äº‹ä»¶ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»º HTTP éš§é“ä»£ç†ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" proxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å“åº”å†…å®¹'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nproxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clientSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿æ¥åˆ°åŸå§‹æœåŠ¡å™¨ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hostname "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("http://")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" serverSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hostname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    clientSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HTTP/1.1 200 Connection Established\\r\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Proxy-agent: Node.js-Proxy\\r\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\r\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    serverSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("head"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    serverSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clientSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    clientSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("serverSocket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»£ç†æ­£åœ¨è¿è¡Œã€‚")]),t._v("\nproxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1337")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘éš§é“ä»£ç†å‘å‡ºè¯·æ±‚ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1337")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CONNECT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nodejs.cn:80'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å·²è¿æ¥'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ HTTP éš§é“å‘å‡ºè¯·æ±‚ã€‚")]),t._v("\n    socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET / HTTP/1.1\\r\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                 "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Host: nodejs.cn:80\\r\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                 "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Connection: close\\r\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                 "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\r\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br")])]),a("h4",{attrs:{id:"_7-1-3-continue-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-3-continue-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 7.1.3 'continue' äº‹ä»¶")]),t._v(" "),a("p",[t._v("å½“æœåŠ¡å™¨å‘é€ "),a("code",[t._v("100 Continue")]),t._v(" HTTP å“åº”æ—¶è§¦å‘ï¼Œé€šå¸¸æ˜¯å› ä¸ºè¯·æ±‚åŒ…å« "),a("code",[t._v("Expect: 100-continue")]),t._v("ã€‚ è¿™æ˜¯å®¢æˆ·ç«¯åº”å‘é€è¯·æ±‚ä¸»ä½“çš„æŒ‡ä»¤ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_7-1-4-information-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-4-information-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 7.1.4 'information' äº‹ä»¶")]),t._v(" "),a("p",[a("code",[t._v("info")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[a("code",[t._v("httpVersion")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("httpVersionMajor")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("integer"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("httpVersionMinor")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("integer"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("statusCode")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("integer"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("statusMessage")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("headers")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("rawHeaders")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string[]"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("æœåŠ¡å™¨å‘é€ 1xx ä¸­é—´å“åº”ï¼ˆä¸åŒ…æ‹¬ 101 Upgradeï¼‰æ—¶è§¦å‘ã€‚ æ­¤äº‹ä»¶çš„ç›‘å¬å™¨å°†ä¼šæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å« HTTP ç‰ˆæœ¬ï¼ŒçŠ¶æ€ç ï¼ŒçŠ¶æ€æ¶ˆæ¯ï¼Œé”®å€¼å¯¹è¯·æ±‚å¤´å¯¹è±¡ã€ä»¥åŠå…·æœ‰åŸå§‹è¯·æ±‚å¤´åç§°å’Œå€¼çš„æ•°ç»„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/length_request'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘å‡ºè¯·æ±‚ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'information'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("è·å¾—ä¸»å“åº”ä¹‹å‰çš„ä¿¡æ¯: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[a("code",[t._v("101 Upgrade")]),t._v(" çŠ¶æ€ä¸ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼ ç»Ÿçš„ HTTP è¯·æ±‚/å“åº”é“¾æ–­å¼€ï¼Œä¾‹å¦‚ Web "),a("code",[t._v("Socket")]),t._v("ã€ç°åœº TLS å‡çº§ã€æˆ– HTTP 2.0ã€‚ è¦æ”¶åˆ° "),a("code",[t._v("101 Upgrade")]),t._v(" çš„é€šçŸ¥ï¼Œè¯·æ”¹ä¸ºç›‘å¬ "),a("a",{attrs:{href:"http://nodejs.cn/s/xjUtig",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'upgrade'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_7-1-5-response-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-5-response-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 7.1.5 'response' äº‹ä»¶")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("response")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.IncomingMessage"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("å½“æ”¶åˆ°æ­¤è¯·æ±‚çš„å“åº”æ—¶è§¦å‘ã€‚ æ­¤äº‹ä»¶ä»…è§¦å‘ä¸€æ¬¡ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_7-1-6-socket-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-6-socket-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 7.1.6 'socket' äº‹ä»¶")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("socket")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("æ­¤äº‹ä»¶ä¿è¯ä¼ å…¥ "),a("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),a("OutboundLink")],1),t._v(" ç±»ï¼ˆ"),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1),t._v(" çš„å­ç±»ï¼‰çš„å®ä¾‹ï¼Œé™¤éç”¨æˆ·æŒ‡å®šäº† "),a("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),a("OutboundLink")],1),t._v(" ä»¥å¤–çš„"),a("code",[t._v("Socket")]),t._v("ç±»å‹ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_7-1-7-timeout-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-7-timeout-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 7.1.7 'timeout' äº‹ä»¶")]),t._v(" "),a("p",[t._v("å½“åº•å±‚"),a("code",[t._v("Socket")]),t._v("å› ä¸æ´»åŠ¨è€Œè¶…æ—¶æ—¶è§¦å‘ã€‚ è¿™åªä¼šé€šçŸ¥"),a("code",[t._v("Socket")]),t._v("å·²ç©ºé—²ã€‚ å¿…é¡»æ‰‹åŠ¨ä¸­æ­¢è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("å¦è¯·å‚è§ï¼š"),a("a",{attrs:{href:"http://nodejs.cn/s/qX7N7E",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("request.setTimeout()")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_7-1-8-upgrade-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-8-upgrade-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 7.1.8 'upgrade' äº‹ä»¶")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("response")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.IncomingMessage"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("socket")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("head")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("æ¯æ¬¡æœåŠ¡å™¨å“åº”å‡çº§è¯·æ±‚æ—¶å‘å‡ºã€‚ å¦‚æœæœªç›‘å¬æ­¤äº‹ä»¶ä¸”å“åº”çŠ¶æ€ç ä¸º "),a("code",[t._v("101 Switching Protocols")]),t._v("ï¼Œåˆ™æ¥æ”¶å‡çº§å“åº”å¤´çš„å®¢æˆ·ç«¯å°†å…³é—­å…¶è¿æ¥ã€‚")]),t._v(" "),a("p",[t._v("æ­¤äº‹ä»¶ä¿è¯ä¼ å…¥"),a("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),a("OutboundLink")],1),t._v("ç±»ï¼ˆ"),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1),t._v("çš„å­ç±»ï¼‰çš„å®ä¾‹ï¼Œé™¤éç”¨æˆ·æŒ‡å®šäº†"),a("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),a("OutboundLink")],1),t._v("ä»¥å¤–çš„"),a("code",[t._v("Socket")]),t._v("ç±»å‹ã€‚")]),t._v(" "),a("p",[t._v("å®¢æˆ·ç«¯æœåŠ¡å™¨å¯¹ï¼Œæ¼”ç¤ºå¦‚ä½•ç›‘å¬ "),a("code",[t._v("'upgrade'")]),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»º HTTP æœåŠ¡å™¨ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å“åº”å†…å®¹'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'upgrade'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HTTP/1.1 101 Web Socket Protocol Handshake\\r\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n               "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Upgrade: WebSocket\\r\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n               "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Connection: Upgrade\\r\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n               "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\r\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å“åº”å›å»ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡å™¨æ­£åœ¨è¿è¡Œã€‚")]),t._v("\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1337")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€è¯·æ±‚ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1337")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Connection'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Upgrade'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Upgrade'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'websocket'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'upgrade'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" upgradeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ¥æ”¶åˆ°å“åº”'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br")])]),a("h3",{attrs:{id:"_7-2-request-aborted"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-request-aborted"}},[t._v("ğŸŒ™")]),t._v(" 7.2 "),a("code",[t._v("request.aborted")])]),t._v(" "),a("p",[t._v("boolean")]),t._v(" "),a("p",[t._v("å¦‚æœè¯·æ±‚å·²ä¸­æ­¢ï¼Œåˆ™ "),a("code",[t._v("request.aborted")]),t._v(" å±æ€§å°†ä¼šä¸º "),a("code",[t._v("true")]),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-3-request-end-data-encoding-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-request-end-data-encoding-callback"}},[t._v("ğŸŒ™")]),t._v(" 7.3 "),a("code",[t._v("request.end([data[, encoding]][, callback])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("data")]),t._v(": string | Buffer")]),t._v(" "),a("li",[a("code",[t._v("encoding")]),t._v(": string")]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(": function")]),t._v(" "),a("li",[t._v("è¿”å›ï¼šthis --- requestï¼Œå³ å¯ä»¥é“¾å¼è°ƒç”¨")])]),t._v(" "),a("h3",{attrs:{id:"_7-4-request-destroy-error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-request-destroy-error"}},[t._v("ğŸŒ™")]),t._v(" 7.4 "),a("code",[t._v("request.destroy([error])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("error")]),t._v(": Error")]),t._v(" "),a("li",[t._v("è¿”å›ï¼š this")])]),t._v(" "),a("h5",{attrs:{id:"_7-5-request-destroyed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-request-destroyed"}},[t._v("ğŸŒ™")]),t._v(" 7.5 "),a("code",[t._v("request.destroyed")])]),t._v(" "),a("p",[a("code",[t._v("boolean")])]),t._v(" "),a("p",[t._v("åœ¨"),a("code",[t._v("request.destroyed")]),t._v("è°ƒç”¨ä¹‹åå˜ä¸º"),a("code",[t._v("true")])]),t._v(" "),a("h3",{attrs:{id:"_7-6-request-flushheaders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-6-request-flushheaders"}},[t._v("ğŸŒ™")]),t._v(" 7.6  "),a("code",[t._v("request.flushHeaders()")])]),t._v(" "),a("p",[t._v("åˆ·æ–°è¯·æ±‚å¤´ã€‚")]),t._v(" "),a("p",[t._v("å‡ºäºæ•ˆç‡åŸå› ï¼ŒNode.js é€šå¸¸ä¼šç¼“å†²è¯·æ±‚å¤´ï¼Œç›´åˆ°è°ƒç”¨ "),a("code",[t._v("request.end()")]),t._v(" æˆ–å†™å…¥ç¬¬ä¸€ä¸ªè¯·æ±‚æ•°æ®å—ã€‚ ç„¶åï¼Œå®ƒå°è¯•å°†è¯·æ±‚å¤´å’Œæ•°æ®æ‰“åŒ…åˆ°å•ä¸ª TCP æ•°æ®åŒ…ä¸­ã€‚")]),t._v(" "),a("p",[t._v("è¿™é€šå¸¸æ˜¯æœŸæœ›çš„ï¼ˆå®ƒèŠ‚çœäº† TCP å¾€è¿”ï¼‰ï¼Œä½†æ˜¯å¯èƒ½å¾ˆæ™šæ‰å‘é€ç¬¬ä¸€ä¸ªæ•°æ®ã€‚ "),a("code",[t._v("request.flushHeaders()")]),t._v(" ç»•è¿‡ä¼˜åŒ–å¹¶å¯åŠ¨è¯·æ±‚ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-7-request-getheader-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-7-request-getheader-name"}},[t._v("ğŸŒ™")]),t._v(" 7.7 "),a("code",[t._v("request.getHeader(name)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("name")]),t._v(": string")])]),t._v(" "),a("li",[a("p",[t._v("è¿”å›ï¼šany")])])]),t._v(" "),a("p",[t._v("è¯»å–è¯·æ±‚ä¸­çš„ä¸€ä¸ªè¯·æ±‚å¤´ã€‚ è¯¥åç§°ä¸åŒºåˆ†å¤§å°å†™ã€‚ è¿”å›å€¼çš„ç±»å‹å–å†³äºæä¾›ç»™ "),a("a",{attrs:{href:"http://nodejs.cn/s/ZBShBB",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("request.setHeader()")]),a("OutboundLink")],1),t._v(" çš„å‚æ•°ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nrequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("byteLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nrequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type=ninja'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'language=javascript'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" contentType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'contentType' æ˜¯ 'text/html'ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" contentLength "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'contentLength' çš„ç±»å‹ä¸ºæ•°å€¼ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'cookie' çš„ç±»å‹ä¸ºå­—ç¬¦ä¸²æ•°ç»„ã€‚")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h3",{attrs:{id:"_7-8-request-maxheaderscount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-8-request-maxheaderscount"}},[t._v("ğŸŒ™")]),t._v(" 7.8 "),a("code",[t._v("request.maxHeadersCount")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" "),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("2000")]),t._v("ã€‚")])]),t._v(" "),a("p",[t._v("é™åˆ¶æœ€å¤§å“åº”å¤´æ•°ã€‚ å¦‚æœè®¾ç½®ä¸º "),a("code",[t._v("0")]),t._v("ï¼Œåˆ™ä¸ä¼šåº”ç”¨ä»»ä½•é™åˆ¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-9-request-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-9-request-path"}},[t._v("ğŸŒ™")]),t._v(" 7.9 "),a("code",[t._v("request.path")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" è¯·æ±‚çš„è·¯å¾„ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"_7-10-request-removeheader-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-10-request-removeheader-name"}},[t._v("ğŸŒ™")]),t._v(" 7.10 "),a("code",[t._v("request.removeHeader(name)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("name")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ç§»é™¤å·²å®šä¹‰åˆ°è¯·æ±‚å¤´å¯¹è±¡ä¸­çš„è¯·æ±‚å¤´ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_7-11-request-setheader-name-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-11-request-setheader-name-value"}},[t._v("ğŸŒ™")]),t._v(" 7.11 "),a("code",[t._v("request.setHeader(name, value)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("name")]),t._v(": string")]),t._v(" "),a("li",[a("code",[t._v("value")]),t._v(": any")])]),t._v(" "),a("p",[t._v("ä¸ºè¯·æ±‚å¤´å¯¹è±¡è®¾ç½®å•ä¸ªè¯·æ±‚å¤´çš„å€¼ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæ­¤è¯·æ±‚å¤´å·²å­˜åœ¨äºå¾…å‘é€çš„è¯·æ±‚å¤´ä¸­ï¼Œåˆ™å…¶å€¼å°†è¢«æ›¿æ¢ã€‚ è¿™é‡Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„æ¥å‘é€å…·æœ‰ç›¸åŒåç§°çš„å¤šä¸ªè¯·æ±‚å¤´ã€‚ éå­—ç¬¦ä¸²å€¼å°†è¢«åŸæ ·ä¿å­˜ã€‚ å› æ­¤ "),a("a",{attrs:{href:"http://nodejs.cn/s/noVJNv",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("request.getHeader()")]),a("OutboundLink")],1),t._v(" å¯èƒ½ä¼šè¿”å›éå­—ç¬¦ä¸²å€¼ã€‚ ä½†æ˜¯éå­—ç¬¦ä¸²å€¼å°†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä»¥è¿›è¡Œç½‘ç»œä¼ è¾“ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ–ï¼š")]),t._v("\nrequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type=ninja'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'language=javascript'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"_7-12-request-setnodelay-nodelay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-12-request-setnodelay-nodelay"}},[t._v("ğŸŒ™")]),t._v(" 7.12 "),a("code",[t._v("request.setNoDelay([noDelay])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("noDelay")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ä¸€æ—¦å°†"),a("code",[t._v("Socket")]),t._v("åˆ†é…ç»™æ­¤è¯·æ±‚å¹¶ä¸”è¿æ¥äº†"),a("code",[t._v("Socket")]),t._v("ï¼Œå°±ä¼šè°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/q9UswY",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("socket.setNoDelay()")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-13-request-setsocketkeepalive-enable-initialdelay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-13-request-setsocketkeepalive-enable-initialdelay"}},[t._v("ğŸŒ™")]),t._v(" 7.13 "),a("code",[t._v("request.setSocketKeepAlive([enable][, initialDelay])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("enable")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("initialDelay")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ä¸€æ—¦å°†"),a("code",[t._v("Socket")]),t._v("åˆ†é…ç»™æ­¤è¯·æ±‚å¹¶è¿æ¥äº†"),a("code",[t._v("Socket")]),t._v("ï¼Œå°±ä¼šè°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/qqbgUD",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("socket.setKeepAlive()")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-14-request-settimeout-timeout-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-14-request-settimeout-timeout-callback"}},[t._v("ğŸŒ™")]),t._v(" 7.14 "),a("code",[t._v("request.setTimeout(timeout[, callback])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("timeout")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" è¯·æ±‚è¶…æ—¶å‰çš„æ¯«ç§’æ•°ã€‚")]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),a("OutboundLink")],1),t._v(" å‘ç”Ÿè¶…æ—¶æ—¶è¦è°ƒç”¨çš„å¯é€‰å‡½æ•°ã€‚ç›¸å½“äºç»‘å®šåˆ° "),a("code",[t._v("'timeout'")]),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/2F5RHd",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.ClientRequest"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ä¸€æ—¦å°†"),a("code",[t._v("Socket")]),t._v("åˆ†é…ç»™æ­¤è¯·æ±‚å¹¶ä¸”è¿æ¥äº†"),a("code",[t._v("Socket")]),t._v("ï¼Œå°±ä¼šè°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/XC4Yyj",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("socket.setTimeout()")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-15-request-socket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-15-request-socket"}},[t._v("ğŸŒ™")]),t._v(" 7.15 "),a("code",[t._v("request.socket")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("æŒ‡å‘åº•å±‚"),a("code",[t._v("Socket")]),t._v("ã€‚ é€šå¸¸ç”¨æˆ·æ— éœ€è®¿é—®æ­¤å±æ€§ã€‚ ç‰¹åˆ«æ˜¯ï¼Œç”±äºåè®®è§£æå™¨é™„åŠ åˆ°"),a("code",[t._v("Socket")]),t._v("çš„æ–¹å¼ï¼Œ"),a("code",[t._v("Socket")]),t._v("å°†ä¸ä¼šè§¦å‘ "),a("code",[t._v("'readable'")]),t._v(" äº‹ä»¶ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡ "),a("code",[t._v("request.connection")]),t._v(" è®¿é—® "),a("code",[t._v("socket")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nodejs.cn'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'response'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ip "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("localAddress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("localPort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("æ‚¨çš„ IP åœ°å€æ˜¯ ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ip"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("ï¼Œæºç«¯å£æ˜¯ ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨å“åº”å¯¹è±¡ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("h3",{attrs:{id:"_7-16-request-writablefinished"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-16-request-writablefinished"}},[t._v("ğŸŒ™")]),t._v(" 7.16 "),a("code",[t._v("request.writableFinished")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("å¦‚æœåœ¨è§¦å‘ "),a("a",{attrs:{href:"http://nodejs.cn/s/yLFDX9",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'finish'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶ä¹‹å‰ï¼Œæ‰€æœ‰æ•°æ®éƒ½å·²åˆ·æ–°åˆ°åº•å±‚ç³»ç»Ÿï¼Œåˆ™ä¸º "),a("code",[t._v("true")]),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-17-request-write-chunk-encoding-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-17-request-write-chunk-encoding-callback"}},[t._v("ğŸŒ™")]),t._v(" 7.17 "),a("code",[t._v("request.write(chunk[, encoding][, callback])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("chunk")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" | "),a("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("encoding")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("å‘é€ä¸€ä¸ªè¯·æ±‚ä¸»ä½“çš„æ•°æ®å—ã€‚ é€šè¿‡å¤šæ¬¡è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯ä»¥å°†è¯·æ±‚ä¸»ä½“å‘é€åˆ°æœåŠ¡å™¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®åœ¨åˆ›å»ºè¯·æ±‚æ—¶ä½¿ç”¨ "),a("code",[t._v("['Transfer-Encoding', 'chunked']")]),t._v(" è¯·æ±‚å¤´è¡Œã€‚")]),t._v(" "),a("p",[a("code",[t._v("encoding")]),t._v(" å‚æ•°æ˜¯å¯é€‰çš„ï¼Œä»…å½“ "),a("code",[t._v("chunk")]),t._v(" æ˜¯å­—ç¬¦ä¸²æ—¶æ‰é€‚ç”¨ã€‚ é»˜è®¤ä¸º "),a("code",[t._v("'utf8'")]),t._v("ã€‚")]),t._v(" "),a("p",[a("code",[t._v("callback")]),t._v(" å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå½“åˆ·æ–°æ­¤æ•°æ®å—æ—¶è°ƒç”¨ï¼Œä½†ä»…å½“æ•°æ®å—éç©ºæ—¶æ‰ä¼šè°ƒç”¨ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœå°†æ•´ä¸ªæ•°æ®æˆåŠŸåˆ·æ–°åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œåˆ™è¿”å› "),a("code",[t._v("true")]),t._v("ã€‚ å¦‚æœå…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®åœ¨ç”¨æˆ·å†…å­˜ä¸­æ’é˜Ÿï¼Œåˆ™è¿”å› "),a("code",[t._v("false")]),t._v("ã€‚ å½“ç¼“å†²åŒºå†æ¬¡ç©ºé—²æ—¶ï¼Œåˆ™è§¦å‘ "),a("code",[t._v("'drain'")]),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("p",[t._v("å½“ä½¿ç”¨ç©ºå­—ç¬¦ä¸²æˆ– buffer è°ƒç”¨ "),a("code",[t._v("write")]),t._v(" å‡½æ•°æ—¶ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšä¸”ç­‰å¾…æ›´å¤šè¾“å…¥ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_7-17-request-reusedsocket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-17-request-reusedsocket"}},[t._v("ğŸŒ™")]),t._v(" 7.17 "),a("code",[t._v("request.reusedSocket")])]),t._v(" "),a("ul",[a("li",[t._v("boolean")])]),t._v(" "),a("p",[t._v("åˆ¤æ–­"),a("code",[t._v("request")]),t._v("æ˜¯å¦æ˜¯é€šè¿‡ä¸€ä¸ªè¢«æ‹’ç»çš„"),a("code",[t._v("socket")]),t._v("å‘é€ã€‚")]),t._v(" "),a("p",[t._v("å½“é€šè¿‡å¯ç”¨ä¿æŒ"),a("code",[t._v("keep-alive")]),t._v(" çš„ä»£ç†å‘é€è¯·æ±‚æ—¶ï¼Œåº•å±‚çš„"),a("code",[t._v("socket")]),t._v("å¯èƒ½æœƒè¢«æ‹’çµ•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨åœ¨ä¸å¹¸çš„æ—¶é—´å…³é—­è¿æ¥ï¼Œåˆ™å®¢æˆ·ç«¯å¯èƒ½ä¼šé‡åˆ°â€œ ECONNRESETâ€é”™è¯¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Server has a 5 seconds keep-alive timeout by default")]),t._v("\nhttp\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Adapting a keep-alive agent")]),t._v("\n  http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Do nothing")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Sending request on 5s interval so it's easy to hit idle timeout")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("p",[t._v("é€šè¿‡åˆ¤æ–­"),a("code",[t._v("req.reusedSocket")]),t._v("çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡é‡æ–°å¯ç”¨è¿æ¥ï¼Œä»è€Œé¿å…è¿™ä¸ªé”™è¯¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" agent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Agent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" keepAlive"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("retriableRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Check if retry is needed")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reusedSocket "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ECONNRESET'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("retriableRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("retriableRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("h2",{attrs:{id:"_8-http-serverresponse-ç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-http-serverresponse-ç±»"}},[t._v("ğŸŒ™")]),t._v(" 8.http.ServerResponse ç±»")]),t._v(" "),a("p",[t._v("ç»§æ‰¿è‡ª: "),a("a",{attrs:{href:"http://nodejs.cn/s/t73H94",target:"_blank",rel:"noopener noreferrer"}},[t._v("Stream"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("æºç è§£è¯»ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  ServerResponse\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_http_server'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  ServerResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[a("code",[t._v("http.ServerResponse")]),t._v(" ç±»ç›´æ¥å°†"),a("code",[t._v("_http_server")]),t._v("ä¸­çš„"),a("code",[t._v("ServerResponse")]),t._v("å¼•å…¥å¹¶å¯¼å‡ºã€‚")]),t._v(" "),a("p",[t._v("æ­¤å¯¹è±¡ç”± HTTP æœåŠ¡å™¨åœ¨å†…éƒ¨åˆ›å»ºï¼Œè€Œä¸æ˜¯ç”±ç”¨æˆ·åˆ›å»ºã€‚ å®ƒä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ ç»™ "),a("a",{attrs:{href:"http://nodejs.cn/s/2qCn57",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'request'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚â€”â€” "),a("a",{attrs:{href:"http://nodejs.cn/api/http.html#http_class_http_serverresponse",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜ç½‘"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_8-1-http-serverresponse-äº‹ä»¶ç›‘å¬"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-http-serverresponse-äº‹ä»¶ç›‘å¬"}},[t._v("ğŸŒ™")]),t._v(" 8.1 http.ServerResponse äº‹ä»¶ç›‘å¬")]),t._v(" "),a("h4",{attrs:{id:"_8-1-1-close-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-1-close-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 8.1.1 'close' äº‹ä»¶")]),t._v(" "),a("p",[t._v("è¡¨æ˜åº•å±‚çš„è¿æ¥å·²è¢«ç»ˆæ­¢ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_8-1-2-finish-äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-2-finish-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 8.1.2 'finish' äº‹ä»¶")]),t._v(" "),a("p",[t._v("å“åº”å‘é€åè§¦å‘ã€‚ æ›´å…·ä½“åœ°è¯´ï¼Œå½“å“åº”å¤´å’Œä¸»ä½“çš„æœ€åä¸€æ®µå·²ç»åˆ‡æ¢åˆ°æ“ä½œç³»ç»Ÿä»¥é€šè¿‡ç½‘ç»œä¼ è¾“æ—¶ï¼Œè§¦å‘è¯¥äº‹ä»¶ã€‚ è¿™å¹¶ä¸æ„å‘³ç€å®¢æˆ·ç«¯å·²æ”¶åˆ°ä»»ä½•ä¿¡æ¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'finish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_8-2-response-cork"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-response-cork"}},[t._v("ğŸŒ™")]),t._v(" 8.2 "),a("code",[t._v("response.cork()")])]),t._v(" "),a("p",[t._v("ç»§æ‰¿è‡ªstream.Writable ç±»,åŒ "),a("a",{attrs:{href:"http://nodejs.cn/s/HbaGHW",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("writable.cork()")]),a("OutboundLink")],1)]),t._v(" "),a("p",[a("code",[t._v("writable.cork()")]),t._v(" æ–¹æ³•å¼ºåˆ¶æŠŠæ‰€æœ‰å†™å…¥çš„æ•°æ®éƒ½ç¼“å†²åˆ°å†…å­˜ä¸­ã€‚ å½“è°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/2Bzt8L",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("stream.uncork()")]),a("OutboundLink")],1),t._v(" æˆ– "),a("a",{attrs:{href:"http://nodejs.cn/s/nvArK4",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("stream.end()")]),a("OutboundLink")],1),t._v(" æ–¹æ³•æ—¶ï¼Œç¼“å†²çš„æ•°æ®æ‰ä¼šè¢«è¾“å‡ºã€‚")]),t._v(" "),a("p",[a("code",[t._v("writable.cork()")]),t._v(" çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†é€‚åº”å°†å‡ ä¸ªæ•°æ®å¿«é€Ÿè¿ç»­åœ°å†™å…¥æµçš„æƒ…å†µã€‚ "),a("code",[t._v("writable.cork()")]),t._v(" ä¸ä¼šç«‹å³å°†å®ƒä»¬è½¬å‘åˆ°åº•å±‚çš„ç›®æ ‡ï¼Œè€Œæ˜¯ç¼“å†²æ‰€æœ‰æ•°æ®å—ï¼Œç›´åˆ°è°ƒç”¨ "),a("code",[t._v("writable.uncork()")]),t._v("ï¼Œè¿™ä¼šå°†å®ƒä»¬å…¨éƒ¨ä¼ ç»™ "),a("code",[t._v("writable._writev()")]),t._v("ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ è¿™å¯ä»¥é˜²æ­¢å‡ºç°è¡Œå¤´é˜»å¡çš„æƒ…å†µï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ­£åœ¨ç­‰å¾…ç¬¬ä¸€ä¸ªæ•°æ®å—è¢«å¤„ç†çš„åŒæ—¶å¯¹æ•°æ®è¿›è¡Œç¼“å†²ã€‚ ä½†æ˜¯ï¼Œä½¿ç”¨ "),a("code",[t._v("writable.cork()")]),t._v(" è€Œä¸å®ç° "),a("code",[t._v("writable._writev()")]),t._v(" å¯èƒ½ä¼šå¯¹ååé‡äº§ç”Ÿä¸åˆ©å½±å“ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-3-response-end-data-encoding-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-response-end-data-encoding-callback"}},[t._v("ğŸŒ™")]),t._v(" 8.3 "),a("code",[t._v("response.end([data[, encoding]][, callback])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("data")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" | "),a("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("encoding")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¿”å›ï¼šthis")])]),t._v(" "),a("p",[t._v("æ­¤æ–¹æ³•å‘æœåŠ¡å™¨å‘å‡ºä¿¡å·ï¼Œè¡¨æ˜å·²å‘é€æ‰€æœ‰å“åº”å¤´å’Œä¸»ä½“ï¼Œè¯¥æœåŠ¡å™¨åº”è¯¥è§†ä¸ºæ­¤æ¶ˆæ¯å·²å®Œæˆã€‚ å¿…é¡»åœ¨æ¯ä¸ªå“åº”ä¸Šè°ƒç”¨æ­¤ "),a("code",[t._v("response.end()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæŒ‡å®šäº† "),a("code",[t._v("data")]),t._v("ï¼Œåˆ™ç›¸å½“äºè°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/gvWo3m",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.write(data, encoding)")]),a("OutboundLink")],1),t._v(" ä¹‹åå†è°ƒç”¨ "),a("code",[t._v("response.end(callback)")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæŒ‡å®šäº† "),a("code",[t._v("callback")]),t._v("ï¼Œåˆ™å½“å“åº”æµå®Œæˆæ—¶å°†è°ƒç”¨å®ƒã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-4-response-flushheaders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-response-flushheaders"}},[t._v("ğŸŒ™")]),t._v(" 8.4 "),a("code",[t._v("response.flushHeaders()")])]),t._v(" "),a("p",[t._v("åˆ·æ–°å“åº”å¤´ã€‚ å¦å¯å‚è§ï¼š"),a("a",{attrs:{href:"http://nodejs.cn/s/JcwoXr",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("request.flushHeaders()")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-5-response-getheader-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-response-getheader-name"}},[t._v("ğŸŒ™")]),t._v(" 8.5 "),a("code",[t._v("response.getHeader(name)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("name")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/6sTGdS",target:"_blank",rel:"noopener noreferrer"}},[t._v("any"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("è¯»å‡ºå·²æ’é˜Ÿä½†æœªå‘é€åˆ°å®¢æˆ·ç«¯çš„å“åº”å¤´ã€‚ è¯¥åç§°ä¸åŒºåˆ†å¤§å°å†™ã€‚ è¿”å›å€¼çš„ç±»å‹å–å†³äºæä¾›ç»™ "),a("a",{attrs:{href:"http://nodejs.cn/s/rqeM3J",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.setHeader()")]),a("OutboundLink")],1),t._v(" çš„å‚æ•°ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nresponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("byteLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nresponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type=ninja'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'language=javascript'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" contentType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentType æ˜¯ 'text/html'ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" contentLength "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentLength çš„ç±»å‹ä¸ºæ•°å€¼ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" setCookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setCookie çš„ç±»å‹ä¸ºå­—ç¬¦ä¸²æ•°ç»„ã€‚")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h3",{attrs:{id:"_8-6-response-getheadernames"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-response-getheadernames"}},[t._v("ğŸŒ™")]),t._v(" 8.6 "),a("code",[t._v("response.getHeaderNames()")])]),t._v(" "),a("ul",[a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string[]"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«å½“å‰ä¼ å‡ºçš„å“åº”å¤´çš„å”¯ä¸€åç§°ã€‚ æ‰€æœ‰å“åº”å¤´åç§°éƒ½æ˜¯å°å†™çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nresponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo=bar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar=baz'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headerNames "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeaderNames")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// headerNames === ['foo', 'set-cookie']")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"_8-7-response-getheaders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-7-response-getheaders"}},[t._v("ğŸŒ™")]),t._v(" 8.7 "),a("code",[t._v("response.getHeaders()")])]),t._v(" "),a("ul",[a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("è¿”å›å½“å‰ä¼ å‡ºçš„å“åº”å¤´çš„æµ…æ‹·è´ã€‚ ç”±äºä½¿ç”¨æµ…æ‹·è´ï¼Œå› æ­¤å¯ä»¥æ›´æ”¹æ•°ç»„çš„å€¼è€Œæ— éœ€é¢å¤–è°ƒç”¨å„ç§ä¸å“åº”å¤´ç›¸å…³çš„ http æ¨¡å—æ–¹æ³•ã€‚ è¿”å›å¯¹è±¡çš„é”®æ˜¯å“åº”å¤´åç§°ï¼Œå€¼æ˜¯å„è‡ªçš„å“åº”å¤´å€¼ã€‚ æ‰€æœ‰å“åº”å¤´åç§°éƒ½æ˜¯å°å†™çš„ã€‚")]),t._v(" "),a("p",[a("strong",[a("code",[t._v("response.getHeaders()")]),t._v(" æ–¹æ³•è¿”å›çš„å¯¹è±¡ä¸æ˜¯ä» JavaScript "),a("code",[t._v("Object")]),t._v(" åŸå‹ç»§æ‰¿çš„")]),t._v("ã€‚ è¿™æ„å‘³ç€å…¸å‹çš„ "),a("code",[t._v("Object")]),t._v(" æ–¹æ³•ï¼Œå¦‚ "),a("code",[t._v("obj.toString()")]),t._v("ã€ "),a("code",[t._v("obj.hasOwnProperty()")]),t._v(" ç­‰éƒ½æ²¡æœ‰å®šä¹‰å¹¶ä¸”ä¸èµ·ä½œç”¨ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nresponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo=bar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar=baz'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeaders")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// headers === { foo: 'bar', 'set-cookie': ['foo=bar', 'bar=baz'] }")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("æºç è§£è¯»ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returns a shallow copy of the current outgoing headers.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OutgoingMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getHeaders")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeaders")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kOutHeaders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯¹è±¡ä¸æ˜¯ä» JavaScript `Object` åŸå‹ç»§æ‰¿çš„ï¼Œç”Ÿæˆä¸€ä¸ªçº¯ç²¹çš„ {}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" keys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" val "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[t._v("å¯ä»¥çœ‹å‡º"),a("code",[t._v("response")]),t._v("æ˜¯"),a("code",[t._v("OutgoingMessage")]),t._v("çš„å®ä¾‹åŒ–å¯¹è±¡ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeaders")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OutgoingMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7777")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h3",{attrs:{id:"_8-8-response-hasheader-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-8-response-hasheader-name"}},[t._v("ğŸŒ™")]),t._v(" 8.8 "),a("code",[t._v("response.hasHeader(name)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("name")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("å¦‚æœå½“å‰åœ¨ä¼ å‡ºçš„å“åº”å¤´ä¸­è®¾ç½®äº†ç”± "),a("code",[t._v("name")]),t._v(" æ ‡è¯†çš„å“åº”å¤´ï¼Œåˆ™è¿”å› "),a("code",[t._v("true")]),t._v("ã€‚ å“åº”å¤´åç§°åŒ¹é…ä¸åŒºåˆ†å¤§å°å†™ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hasContentType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_8-9-response-removeheader-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-9-response-removeheader-name"}},[t._v("ğŸŒ™")]),t._v(" 8.9 "),a("code",[t._v("response.removeHeader(name)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("name")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ç§»é™¤æ’é˜Ÿç­‰å¾…ä¸­çš„éšå¼å‘é€çš„å“åº”å¤´ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Encoding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_8-10-response-setheader-name-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-10-response-setheader-name-value"}},[t._v("ğŸŒ™")]),t._v(" 8.10 "),a("code",[t._v("response.setHeader(name, value)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("name")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("value")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/6sTGdS",target:"_blank",rel:"noopener noreferrer"}},[t._v("any"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("ä¸ºéšå¼å“åº”å¤´è®¾ç½®å•ä¸ªå“åº”å¤´çš„å€¼ã€‚ å¦‚æœæ­¤å“åº”å¤´å·²å­˜åœ¨äºå¾…å‘é€çš„å“åº”å¤´ä¸­ï¼Œåˆ™å…¶å€¼å°†è¢«æ›¿æ¢ã€‚ åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„æ¥å‘é€å…·æœ‰ç›¸åŒåç§°çš„å¤šä¸ªå“åº”å¤´ã€‚ éå­—ç¬¦ä¸²å€¼å°†è¢«åŸæ ·ä¿å­˜ã€‚ å› æ­¤ "),a("a",{attrs:{href:"http://nodejs.cn/s/pbE7VN",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.getHeader()")]),a("OutboundLink")],1),t._v(" å¯èƒ½è¿”å›éå­—ç¬¦ä¸²å€¼ã€‚ ä½†æ˜¯éå­—ç¬¦ä¸²å€¼å°†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä»¥è¿›è¡Œç½‘ç»œä¼ è¾“ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("æˆ–ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type=ninja'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'language=javascript'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("å°è¯•è®¾ç½®åŒ…å«æ— æ•ˆå­—ç¬¦çš„å“åº”å¤´å­—æ®µåç§°æˆ–å€¼å°†å¯¼è‡´æŠ›å‡º "),a("a",{attrs:{href:"http://nodejs.cn/s/Z7Lqyj",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("TypeError")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å½“ä½¿ç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/rqeM3J",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.setHeader()")]),a("OutboundLink")],1),t._v(" è®¾ç½®å“åº”å¤´æ—¶ï¼Œå®ƒä»¬å°†ä¸ä¼ ç»™ "),a("a",{attrs:{href:"http://nodejs.cn/s/fnj9oM",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.writeHead()")]),a("OutboundLink")],1),t._v(" çš„ä»»ä½•å“åº”å¤´åˆå¹¶ï¼Œå…¶ä¸­ "),a("strong",[a("a",{attrs:{href:"http://nodejs.cn/s/fnj9oM",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.writeHead()")]),a("OutboundLink")],1),t._v(" çš„å“åº”å¤´ä¼˜å…ˆ")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å› content-type = text/plain")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-Foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ok'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("å¦‚æœè°ƒç”¨äº† "),a("a",{attrs:{href:"http://nodejs.cn/s/fnj9oM",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.writeHead()")]),a("OutboundLink")],1),t._v(" æ–¹æ³•å¹¶ä¸”å°šæœªè°ƒç”¨æ­¤æ–¹æ³•ï¼Œåˆ™å®ƒå°†ç›´æ¥å°†æä¾›çš„å“åº”å¤´å€¼å†™å…¥ç½‘ç»œé€šé“è€Œä¸åœ¨å†…éƒ¨è¿›è¡Œç¼“å­˜ï¼Œå¹¶ä¸”å“åº”å¤´ä¸Šçš„ "),a("a",{attrs:{href:"http://nodejs.cn/s/pbE7VN",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.getHeader()")]),a("OutboundLink")],1),t._v(" å°†ä¸ä¼šäº§ç”Ÿé¢„æœŸçš„ç»“æœã€‚ å¦‚æœéœ€è¦æ¸è¿›çš„å“åº”å¤´å¡«å……ä»¥åŠå°†æ¥å¯èƒ½çš„æ£€ç´¢å’Œä¿®æ”¹ï¼Œåˆ™ä½¿ç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/rqeM3J",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.setHeader()")]),a("OutboundLink")],1),t._v(" è€Œä¸æ˜¯ "),a("a",{attrs:{href:"http://nodejs.cn/s/fnj9oM",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.writeHead()")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-11-response-settimeout-msecs-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-11-response-settimeout-msecs-callback"}},[t._v("ğŸŒ™")]),t._v(" 8.11 "),a("code",[t._v("response.setTimeout(msecs[, callback])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("msecs")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/rMXoZ1",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.ServerResponse"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("å°†Socketçš„è¶…æ—¶å€¼è®¾ç½®ä¸º "),a("code",[t._v("msecs")]),t._v("ã€‚ å¦‚æœæä¾›äº†å›è°ƒï¼Œåˆ™ä¼šå°†å…¶ä½œä¸ºç›‘å¬å™¨æ·»åŠ åˆ°å“åº”å¯¹è±¡ä¸Šçš„ "),a("code",[t._v("'timeout'")]),t._v(" äº‹ä»¶ä¸­ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæ²¡æœ‰ "),a("code",[t._v("'timeout'")]),t._v(" ç›‘å¬å™¨æ·»åŠ åˆ°è¯·æ±‚ã€å“åº”ã€æˆ–æœåŠ¡å™¨ï¼Œåˆ™"),a("code",[t._v("Socket")]),t._v("åœ¨è¶…æ—¶æ—¶å°†è¢«é”€æ¯ã€‚ å¦‚æœæœ‰å›è°ƒå¤„ç†å‡½æ•°åˆ†é…ç»™è¯·æ±‚ã€å“åº”ã€æˆ–æœåŠ¡å™¨çš„ "),a("code",[t._v("'timeout'")]),t._v(" äº‹ä»¶ï¼Œåˆ™å¿…é¡»æ˜¾å¼å¤„ç†è¶…æ—¶çš„"),a("code",[t._v("Socket")]),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-12-response-socket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-12-response-socket"}},[t._v("ğŸŒ™")]),t._v(" 8.12 "),a("code",[t._v("response.socket")])]),t._v(" "),a("p",[a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("æŒ‡å‘åº•å±‚çš„"),a("code",[t._v("socket")]),t._v("ã€‚ é€šå¸¸ç”¨æˆ·ä¸éœ€è¦è®¿é—®æ­¤å±æ€§ã€‚ ç‰¹åˆ«æ˜¯ï¼Œç”±äºåè®®è§£æå™¨é™„åŠ åˆ°"),a("code",[t._v("socket")]),t._v("çš„æ–¹å¼ï¼Œ"),a("code",[t._v("socket")]),t._v("å°†ä¸ä¼šè§¦å‘ "),a("code",[t._v("'readable'")]),t._v(" äº‹ä»¶ã€‚ åœ¨è°ƒç”¨ "),a("code",[t._v("response.end()")]),t._v(" ä¹‹åï¼Œæ­¤å±æ€§å°†ä¸ºç©ºã€‚ ä¹Ÿå¯ä»¥é€šè¿‡ "),a("code",[t._v("response.connection")]),t._v(" è®¿é—® "),a("code",[t._v("socket")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ip "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoteAddress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remotePort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("æ‚¨çš„ IP åœ°å€æ˜¯ ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ip"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("ï¼Œæ‚¨çš„æºç«¯å£æ˜¯ ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("æ­¤å±æ€§ä¿è¯æ˜¯ "),a("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),a("OutboundLink")],1),t._v(" ç±»ï¼ˆ"),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),a("OutboundLink")],1),t._v(" çš„å­ç±»ï¼‰çš„å®ä¾‹ï¼Œé™¤éç”¨æˆ·æŒ‡å®šäº† "),a("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),a("OutboundLink")],1),t._v(" ä»¥å¤–çš„"),a("code",[t._v("socket")]),t._v("ç±»å‹ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-13-response-statuscode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-13-response-statuscode"}},[t._v("ğŸŒ™")]),t._v(" 8.13 "),a("code",[t._v("response.statusCode")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" "),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("200")]),t._v("ã€‚")])]),t._v(" "),a("p",[t._v("å½“ä½¿ç”¨éšå¼çš„å“åº”å¤´æ—¶ï¼ˆæ²¡æœ‰æ˜¾å¼åœ°è°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/fnj9oM",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.writeHead()")]),a("OutboundLink")],1),t._v("ï¼‰ï¼Œæ­¤å±æ€§æ§åˆ¶åœ¨åˆ·æ–°å“åº”å¤´æ—¶å°†å‘é€åˆ°å®¢æˆ·ç«¯çš„çŠ¶æ€ç ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("å“åº”å¤´å‘é€åˆ°å®¢æˆ·ç«¯åï¼Œæ­¤å±æ€§è¡¨ç¤ºå·²å‘é€çš„çŠ¶æ€ç ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-14-response-statusmessage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-14-response-statusmessage"}},[t._v("ğŸŒ™")]),t._v(" 8.14 "),a("code",[t._v("response.statusMessage")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("å½“ä½¿ç”¨éšå¼çš„å“åº”å¤´æ—¶ï¼ˆæ²¡æœ‰æ˜¾å¼åœ°è°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/fnj9oM",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.writeHead()")]),a("OutboundLink")],1),t._v("ï¼‰ï¼Œæ­¤å±æ€§æ§åˆ¶åœ¨åˆ·æ–°å“åº”å¤´æ—¶å°†å‘é€åˆ°å®¢æˆ·ç«¯çš„çŠ¶æ€æ¶ˆæ¯ã€‚ å¦‚æœä¿ç•™ä¸º "),a("code",[t._v("undefined")]),t._v("ï¼Œåˆ™å°†ä½¿ç”¨çŠ¶æ€ç çš„æ ‡å‡†æ¶ˆæ¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusMessage "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Not found'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("å“åº”å¤´å‘é€åˆ°å®¢æˆ·ç«¯åï¼Œæ­¤å±æ€§è¡¨ç¤ºå·²å‘é€çš„çŠ¶æ€æ¶ˆæ¯ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-15response-write-chunk-encoding-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-15response-write-chunk-encoding-callback"}},[t._v("ğŸŒ™")]),t._v(" 8.15"),a("code",[t._v("response.write(chunk[, encoding][, callback])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("chunk")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" | "),a("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("encoding")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" "),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("'utf8'")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("code",[t._v("chunk")]),t._v(" å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ– bufferã€‚ å¦‚æœ "),a("code",[t._v("chunk")]),t._v(" æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šå¦‚ä½•å°†å…¶ç¼–ç ä¸ºå­—èŠ‚æµã€‚ å½“åˆ·æ–°æ­¤æ•°æ®å—æ—¶å°†è°ƒç”¨ "),a("code",[t._v("callback")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("ç¬¬ä¸€æ¬¡è°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/gvWo3m",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.write()")]),a("OutboundLink")],1),t._v(" æ—¶ï¼Œå®ƒä¼šå°†ç¼“å†²çš„å“åº”å¤´ä¿¡æ¯å’Œä¸»ä½“çš„ç¬¬ä¸€ä¸ªæ•°æ®å—å‘é€ç»™å®¢æˆ·ç«¯ã€‚ ç¬¬äºŒæ¬¡è°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/gvWo3m",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.write()")]),a("OutboundLink")],1),t._v(" æ—¶ï¼ŒNode.js å‡å®šæ•°æ®å°†è¢«æµå¼ä¼ è¾“ï¼Œå¹¶åˆ†åˆ«å‘é€æ–°æ•°æ®ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå“åº”è¢«ç¼“å†²åˆ°ä¸»ä½“çš„ç¬¬ä¸€ä¸ªæ•°æ®å—ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœå°†æ•´ä¸ªæ•°æ®æˆåŠŸåˆ·æ–°åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œåˆ™è¿”å› "),a("code",[t._v("true")]),t._v("ã€‚ å¦‚æœå…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®åœ¨ç”¨æˆ·å†…å­˜ä¸­æ’é˜Ÿï¼Œåˆ™è¿”å› "),a("code",[t._v("false")]),t._v("ã€‚ å½“ç¼“å†²åŒºå†æ¬¡ç©ºé—²æ—¶ï¼Œåˆ™è§¦å‘ "),a("code",[t._v("'drain'")]),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-16-response-writehead-statuscode-statusmessage-headers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-16-response-writehead-statuscode-statusmessage-headers"}},[t._v("ğŸŒ™")]),t._v(" 8.16 "),a("code",[t._v("response.writeHead(statusCode[, statusMessage][, headers])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("statusCode")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("statusMessage")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("headers")]),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/rMXoZ1",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.ServerResponse"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("å‘è¯·æ±‚å‘é€å“åº”å¤´ã€‚ çŠ¶æ€ç æ˜¯ä¸€ä¸ª 3 ä½çš„ HTTP çŠ¶æ€ç ï¼Œå¦‚ "),a("code",[t._v("404")]),t._v("ã€‚ æœ€åä¸€ä¸ªå‚æ•° "),a("code",[t._v("headers")]),t._v(" æ˜¯å“åº”å¤´ã€‚ å¯ä»¥å¯é€‰åœ°å°†ç”¨æˆ·å¯è¯»çš„ "),a("code",[t._v("statusMessage")]),t._v(" ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚")]),t._v(" "),a("p",[t._v("è¿”å›å¯¹ "),a("code",[t._v("ServerResponse")]),t._v(" çš„å¼•ç”¨ï¼Œä»¥ä¾¿å¯ä»¥é“¾å¼è°ƒç”¨ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nresponse\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("byteLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("æ­¤æ–¹æ³•åªèƒ½åœ¨æ¶ˆæ¯ä¸Šè°ƒç”¨ä¸€æ¬¡ï¼Œå¹¶ä¸”å¿…é¡»åœ¨è°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/sqAtet",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.end()")]),a("OutboundLink")],1),t._v(" ä¹‹å‰è°ƒç”¨ã€‚")]),t._v(" "),a("p",[t._v("å½“ä½¿ç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/rqeM3J",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.setHeader()")]),a("OutboundLink")],1),t._v(" è®¾ç½®å“åº”å¤´æ—¶ï¼Œåˆ™ä¸ä¼ ç»™ "),a("a",{attrs:{href:"http://nodejs.cn/s/fnj9oM",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.writeHead()")]),a("OutboundLink")],1),t._v(" çš„ä»»ä½•å“åº”å¤´åˆå¹¶ï¼Œä¸” "),a("a",{attrs:{href:"http://nodejs.cn/s/fnj9oM",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.writeHead()")]),a("OutboundLink")],1),t._v(" çš„ä¼˜å…ˆã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœè°ƒç”¨æ­¤æ–¹æ³•å¹¶ä¸”å°šæœªè°ƒç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/rqeM3J",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.setHeader()")]),a("OutboundLink")],1),t._v("ï¼Œåˆ™ç›´æ¥å°†æä¾›çš„å“åº”å¤´å€¼å†™å…¥ç½‘ç»œé€šé“è€Œä¸åœ¨å†…éƒ¨è¿›è¡Œç¼“å­˜ï¼Œå“åº”å¤´ä¸Šçš„ "),a("a",{attrs:{href:"http://nodejs.cn/s/pbE7VN",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.getHeader()")]),a("OutboundLink")],1),t._v(" å°†ä¸ä¼šäº§ç”Ÿé¢„æœŸçš„ç»“æœã€‚ å¦‚æœéœ€è¦æ¸è¿›çš„å“åº”å¤´å¡«å……ä»¥åŠå°†æ¥å¯èƒ½çš„æ£€ç´¢å’Œä¿®æ”¹ï¼Œåˆ™æ”¹ç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/rqeM3J",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("response.setHeader()")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å› content-type = text/plain")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-Foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ok'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("code",[t._v("Content-Length")]),t._v(" ä»¥å­—èŠ‚è€Œéå­—ç¬¦ä¸ºå•ä½ã€‚ ä½¿ç”¨ "),a("code",[t._v("Buffer.byteLength()")]),t._v(" æ¥åˆ¤æ–­ä¸»ä½“çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ Node.js ä¸æ£€æŸ¥ "),a("code",[t._v("Content-Length")]),t._v(" å’Œå·²ä¼ è¾“çš„ä¸»ä½“çš„é•¿åº¦æ˜¯å¦ç›¸ç­‰ã€‚")]),t._v(" "),a("p",[t._v("å°è¯•è®¾ç½®åŒ…å«æ— æ•ˆå­—ç¬¦çš„å“åº”å¤´å­—æ®µåç§°æˆ–å€¼å°†å¯¼è‡´æŠ›å‡º "),a("a",{attrs:{href:"http://nodejs.cn/s/Z7Lqyj",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("TypeError")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_9-http-get-options-callback-å’Œhttp-get-url-options-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-http-get-options-callback-å’Œhttp-get-url-options-callback"}},[t._v("ğŸŒ™")]),t._v(" 9."),a("code",[t._v("http.get(options[, callback])")]),t._v("å’Œ"),a("code",[t._v("http.get(url[, options][, callback])")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("url")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" | "),a("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[t._v("URL"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("options")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1),t._v(" æ¥å—ä¸ "),a("a",{attrs:{href:"http://nodejs.cn/s/d1myoL",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("http.request()")]),a("OutboundLink")],1),t._v(" ç›¸åŒçš„ "),a("code",[t._v("options")]),t._v("ï¼Œä¸” "),a("code",[t._v("method")]),t._v(" å§‹ç»ˆè®¾ç½®ä¸º "),a("code",[t._v("GET")]),t._v("ã€‚ä»åŸå‹ç»§æ‰¿çš„å±æ€§å°†è¢«å¿½ç•¥ã€‚")]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1),t._v(", "),a("code",[t._v("callback")]),t._v(" è°ƒç”¨æ—¶åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ "),a("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("http.IncomingMessage")]),a("OutboundLink")],1),t._v(" çš„å®ä¾‹ã€‚")]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/2F5RHd",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.ClientRequest"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("è¿™ä¸ªæ–¹æ³•ä¸ "),a("a",{attrs:{href:"http://nodejs.cn/s/d1myoL",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("http.request()")]),a("OutboundLink")],1),t._v(" çš„å”¯ä¸€åŒºåˆ«æ˜¯å®ƒå°†æ–¹æ³•è®¾ç½®ä¸º GET å¹¶è‡ªåŠ¨è°ƒç”¨ "),a("code",[t._v("req.end()")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://nodejs.cn/index.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" statusCode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" contentType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("statusCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¯·æ±‚å¤±è´¥\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                      "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("çŠ¶æ€ç : ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("statusCode"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^application\\/json")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contentType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ— æ•ˆçš„ content-type.\\n'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                      "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("æœŸæœ›çš„æ˜¯ application/json ä½†æ¥æ”¶åˆ°çš„æ˜¯ ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("contentType"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¶ˆè´¹å“åº”æ•°æ®æ¥é‡Šæ”¾å†…å­˜ã€‚")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resume")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEncoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" rawData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" rawData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" chunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parsedData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parsedData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("å‡ºç°é”™è¯¯: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br")])]),a("h2",{attrs:{id:"_10-http-request-options-callback-å’Œhttp-request-url-options-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-http-request-options-callback-å’Œhttp-request-url-options-callback"}},[t._v("ğŸŒ™")]),t._v(" 10. "),a("code",[t._v("http.request(options[, callback])")]),t._v("å’Œ"),a("code",[t._v("http.request(url[, options][, callback])")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" postData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" querystring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'msg'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä½ å¥½ä¸–ç•Œ'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nodejs.cn'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/upload'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/x-www-form-urlencoded'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("byteLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("postData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("çŠ¶æ€ç : ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("å“åº”å¤´: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEncoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("å“åº”ä¸»ä½“: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chunk"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å“åº”ä¸­å·²æ— æ•°æ®'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("è¯·æ±‚é‡åˆ°é—®é¢˜: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†æ•°æ®å†™å…¥è¯·æ±‚ä¸»ä½“ã€‚")]),t._v("\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("postData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿…é¡»å§‹ç»ˆè°ƒç”¨ req.end() æ¥è¡¨ç¤ºè¯·æ±‚çš„ç»“æŸ")]),t._v("\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("url")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" | "),a("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[t._v("URL"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("options")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[a("code",[t._v("agent")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/HRCnER",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.Agent"),a("OutboundLink")],1),t._v(" | "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1),t._v(" æ§åˆ¶ "),a("a",{attrs:{href:"http://nodejs.cn/s/HRCnER",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Agent")]),a("OutboundLink")],1),t._v(" çš„è¡Œä¸ºã€‚å¯èƒ½çš„å€¼æœ‰ï¼š\n"),a("ul",[a("li",[a("code",[t._v("undefined")]),t._v(" (é»˜è®¤): å¯¹æ­¤ä¸»æœºå’Œç«¯å£ä½¿ç”¨ "),a("a",{attrs:{href:"http://nodejs.cn/s/g7BhW2",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("http.globalAgent")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("Agent")]),t._v(" å¯¹è±¡: æ˜¾å¼åœ°ä½¿ç”¨ä¼ å…¥çš„ "),a("code",[t._v("Agent")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("false")]),t._v(": ä½¿ç”¨æ–°å»ºçš„å…·æœ‰é»˜è®¤å€¼çš„ "),a("code",[t._v("Agent")]),t._v("ã€‚")])])]),t._v(" "),a("li",[a("code",[t._v("auth")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" åŸºæœ¬çš„èº«ä»½éªŒè¯ï¼Œå³ "),a("code",[t._v("'user:password'")]),t._v("ï¼Œç”¨äºè®¡ç®—æˆæƒè¯·æ±‚å¤´ã€‚")]),t._v(" "),a("li",[a("code",[t._v("createConnection")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1),t._v(" å½“ "),a("code",[t._v("agent")]),t._v(" é€‰é¡¹æœªè¢«ä½¿ç”¨æ—¶ï¼Œç”¨æ¥ä¸ºè¯·æ±‚ç”Ÿæˆå¥—æ¥å­—æˆ–æµçš„å‡½æ•°ã€‚è¿™å¯ç”¨äºé¿å…åˆ›å»ºè‡ªå®šä¹‰çš„ "),a("code",[t._v("Agent")]),t._v(" ç±»ä»¥è¦†ç›–é»˜è®¤çš„ "),a("code",[t._v("createConnection")]),t._v(" å‡½æ•°ã€‚è¯¦è§ "),a("a",{attrs:{href:"http://nodejs.cn/s/nH3X12",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("agent.createConnection()")]),a("OutboundLink")],1),t._v("ã€‚ä»»ä½•"),a("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŒå·¥æµ"),a("OutboundLink")],1),t._v("éƒ½æ˜¯æœ‰æ•ˆçš„è¿”å›å€¼ã€‚")]),t._v(" "),a("li",[a("code",[t._v("defaultPort")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" åè®®çš„é»˜è®¤ç«¯å£ã€‚ å¦‚æœä½¿ç”¨ "),a("code",[t._v("Agent")]),t._v("ï¼Œåˆ™é»˜è®¤å€¼ä¸º "),a("code",[t._v("agent.defaultPort")]),t._v("ï¼Œå¦åˆ™ä¸º "),a("code",[t._v("undefined")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("family")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" å½“è§£æ "),a("code",[t._v("host")]),t._v(" æˆ– "),a("code",[t._v("hostname")]),t._v(" æ—¶ä½¿ç”¨çš„ IP åœ°å€æ—ã€‚æœ‰æ•ˆå€¼ä¸º "),a("code",[t._v("4")]),t._v(" æˆ– "),a("code",[t._v("6")]),t._v("ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™åŒæ—¶ä½¿ç”¨ IP v4 å’Œ v6ã€‚")]),t._v(" "),a("li",[a("code",[t._v("headers")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),a("OutboundLink")],1),t._v(" åŒ…å«è¯·æ±‚å¤´çš„å¯¹è±¡ã€‚")]),t._v(" "),a("li",[a("code",[t._v("host")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" è¯·æ±‚å‘é€è‡³çš„æœåŠ¡å™¨çš„åŸŸåæˆ– IP åœ°å€ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("'localhost'")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("hostname")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" "),a("code",[t._v("host")]),t._v(" çš„åˆ«åã€‚ä¸ºäº†æ”¯æŒ "),a("a",{attrs:{href:"http://nodejs.cn/s/b28B2A",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("url.parse()")]),a("OutboundLink")],1),t._v("ï¼Œå¦‚æœåŒæ—¶æŒ‡å®š "),a("code",[t._v("host")]),t._v(" å’Œ "),a("code",[t._v("hostname")]),t._v("ï¼Œåˆ™ä½¿ç”¨ "),a("code",[t._v("hostname")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("insecureHTTPParser")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1),t._v(" ä½¿ç”¨ä¸å®‰å…¨çš„ HTTP è§£æå™¨ï¼Œå½“ä¸º "),a("code",[t._v("true")]),t._v(" æ—¶æ¥å—æ— æ•ˆçš„ HTTP è¯·æ±‚å¤´ã€‚åº”é¿å…ä½¿ç”¨ä¸å®‰å…¨çš„è§£æå™¨ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œå‚è§ "),a("a",{attrs:{href:"http://nodejs.cn/s/5Bnm43",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("--insecure-http-parser")]),a("OutboundLink")],1),t._v("ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("localAddress")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" ä¸ºç½‘ç»œè¿æ¥ç»‘å®šçš„æœ¬åœ°æ¥å£ã€‚")]),t._v(" "),a("li",[a("code",[t._v("lookup")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1),t._v(" è‡ªå®šä¹‰çš„æŸ¥æ‰¾å‡½æ•°ã€‚ "),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/LJLsTL",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("dns.lookup()")]),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("maxHeaderSize")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" å¯é€‰åœ°ï¼Œé‡å†™æ­¤æœåŠ¡å™¨æ¥æ”¶çš„è¯·æ±‚çš„ "),a("a",{attrs:{href:"http://nodejs.cn/s/HfsyuU",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("--max-http-header-size")]),a("OutboundLink")],1),t._v(" å€¼ï¼Œå³è¯·æ±‚å¤´çš„æœ€å¤§é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ "),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" 16384ï¼ˆ16KBï¼‰ã€‚")]),t._v(" "),a("li",[a("code",[t._v("method")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡å®š HTTP è¯·æ±‚çš„æ–¹æ³•ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("'GET'")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("path")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" è¯·æ±‚çš„è·¯å¾„ã€‚åº”åŒ…æ‹¬æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ä¾‹å¦‚ "),a("code",[t._v("'/index.html?page=12'")]),t._v("ã€‚å½“è¯·æ±‚çš„è·¯å¾„åŒ…å«éæ³•çš„å­—ç¬¦æ—¶ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ç›®å‰åªæœ‰ç©ºæ ¼è¢«æ‹’ç»ï¼Œä½†æœªæ¥å¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("'/'")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("port")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(" è¿œç¨‹æœåŠ¡å™¨çš„ç«¯å£ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("defaultPort")]),t._v("ï¼ˆå¦‚æœæœ‰è®¾ç½®ï¼‰æˆ– "),a("code",[t._v("80")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("protocol")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" ä½¿ç”¨çš„åè®®ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("'http:'")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("setHost")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),a("OutboundLink")],1),t._v(": æŒ‡å®šæ˜¯å¦è‡ªåŠ¨æ·»åŠ  "),a("code",[t._v("Host")]),t._v(" è¯·æ±‚å¤´ã€‚"),a("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),a("code",[t._v("true")]),t._v("ã€‚")]),t._v(" "),a("li",[a("code",[t._v("socketPath")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),a("OutboundLink")],1),t._v(" Unix åŸŸå¥—æ¥å­—ã€‚å¦‚æœæŒ‡å®šäº† "),a("code",[t._v("host")]),t._v(" æˆ– "),a("code",[t._v("port")]),t._v(" ä¹‹ä¸€ï¼ˆå®ƒä»¬æŒ‡å®šäº† TCP å¥—æ¥å­—ï¼‰ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨æ­¤é€‰é¡¹ã€‚")]),t._v(" "),a("li",[a("code",[t._v("timeout")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),a("OutboundLink")],1),t._v(": æŒ‡å®šå¥—æ¥å­—è¶…æ—¶çš„æ•°å€¼ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚è¿™ä¼šåœ¨å¥—æ¥å­—è¢«è¿æ¥ä¹‹å‰è®¾ç½®è¶…æ—¶ã€‚")])])]),t._v(" "),a("li",[a("code",[t._v("callback")]),t._v(" "),a("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Function"),a("OutboundLink")],1),t._v(",å¯é€‰çš„ "),a("code",[t._v("callback")]),t._v(" å‚æ•°ä¼šä½œä¸ºå•æ¬¡ç›‘å¬å™¨è¢«æ·»åŠ åˆ° "),a("a",{attrs:{href:"http://nodejs.cn/s/qwaiK8",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("'response'")]),a("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("li",[t._v("è¿”å›: "),a("a",{attrs:{href:"http://nodejs.cn/s/2F5RHd",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.ClientRequest"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"_11-å°ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-å°ç»“"}},[t._v("ğŸŒ™")]),t._v(" 11. å°ç»“")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å¯¼å…¥httpæ¨¡å—")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("åˆ›å»ºæœåŠ¡å¹¶ç›‘å¬ç«¯å£")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// res: http.ServerResponseç±»")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// req: http.ClientRequestç±»")]),t._v("\n    response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼˜å…ˆäºsetHeader")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html;charset=UTF-8'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿…é¡»è°ƒç”¨end()æ–¹æ³•")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("åˆ›å»ºgetè¯·æ±‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://nodejs.cn/index.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do what you want")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[a("code",[t._v("http.get")]),t._v("æ˜¯åˆ›å»ºhttpè¯·æ±‚GETæ–¹æ³•å¿«æ·æ–¹å¼ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åˆ›å»ºpostè¯·æ±‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("code",[t._v("http.request")]),t._v("æ˜¯åˆ›å»ºhttpè¯·æ±‚ä¸‡èƒ½æ–¹æ³•ã€‚")])])]),t._v(" "),a("p",[t._v("æœ¬æ–‡å­¦ä¹ ç¬”è®°å¤§éƒ¨åˆ†æ˜¯æŸ¥çœ‹å®˜ç½‘APIï¼Œéƒ¨åˆ†æ˜¯æŸ¥çœ‹nodejsæºç ï¼Œåªä¾›å‚è€ƒï¼Œä¸å–œå‹¿å–· (#^.^#)ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);